"'Single Ticket Info' As screen":
    OnHidden: =
    OnVisible: |
        =UpdateContext({showComboBox: If(ticketInfo.Status = "open", true, false)});
        UpdateContext({primAssignee: Blank()});
        Refresh(Comments_1);
        If(
            ticketInfo.Status = "open",
            Set(
                closeTicketButtonVis,
                true
            ),
            Set(
                closeTicketButtonVis,
                false
            )
        );
        Set(
            primAssignee,
            If(
                IsBlank(ticketInfo.AssignedTo),
                Blank(),
                Filter(
                    Users_1,
                    ID = ticketInfo.AssignedTo
                )
            )
        );

    SingleTicketInfoVerticalLayoutContainer As groupContainer.verticalAutoLayoutContainer:
        Height: =Parent.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutMode: =LayoutMode.Auto
        LayoutOverflowY: =LayoutOverflow.Scroll
        PaddingTop: =120
        Width: =Parent.Width
        ZIndex: =1

        SingleTicketInfoMainContent_2 As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            FillPortions: =0
            Height: =Parent.Height-compWebHeader_4.Height-SingleTicketInfo_Title.Height
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            LayoutOverflowY: =LayoutOverflow.Scroll
            LayoutWrap: =If(SingleTicketInfoDetailsContainer_3.Visible,false,true)
            Width: =Parent.Width
            ZIndex: =4

            SingleTicketInfoMobileViewContainer As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.Start
                Height: =Parent.Height
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                LayoutOverflowY: =LayoutOverflow.Scroll
                LayoutWrap: =true
                PaddingBottom: =90
                PaddingTop: =20
                Visible: |
                    ='Single Ticket Info'.Size=1
                ZIndex: =1

                NewMobileDetails As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: =If(userData.role = "staff",400,475)
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =1

                    Rectangle_behind_details_2 As rectangle:
                        BorderThickness: =3
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =Parent.Height*.90
                        Visible: |-
                            =
                            true
                        Width: =Parent.Width*.90
                        X: =(Parent.Width-Self.Width)/2
                        Y: =(Parent.Height-Self.Height)/2
                        ZIndex: =1

                    Details_label_2 As label:
                        Align: =Align.Center
                        Color: =RGBA(255, 255, 255, 1)
                        Fill: =ColorScheme.primary
                        Height: =38
                        Size: =24
                        Text: ="Details"
                        Width: =Parent.Width*.90
                        X: =Rectangle_behind_details_2.X
                        Y: =Rectangle_behind_details_2.Y
                        ZIndex: =2

                    Save_Button_1 As button:
                        Fill: =ColorScheme.primary
                        Height: =20
                        OnSelect: |-
                            =// sql
                            /*
                            If(AssigneeId.Text = "0",
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: 0}
                                ),
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: Value(AssigneeId.Text)},
                                    {addAssignees: Additional_Assign_Value_Label.Text}
                                    )
                            );*/
                            // sharepoint
                            Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Tags_ComboBox_Value_1.Text},
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId_1),
                                        Blank(),
                                        Value(AssigneeId_1.Text)
                                    )
                                },
                                {addAssignees: Additional_Assign_Value_Label_1.Text}
                            );
                            Refresh(Tickets)
                        Size: =8
                        Text: ="Apply"
                        Visible: |-
                            =//If(userData.role = "staff", false,true)
                            If(userData.role = "staff",false,showComboBox)
                        Width: =80
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Created_Label_1.Height+ Created_Label_1.Y
                        ZIndex: =3

                    Tags_ComboBox_Value_1 As label:
                        Height: =0
                        Text: =Concat(Tags_ComboBox_1.SelectedItems, Concatenate(name, ","))
                        Visible: =false
                        Width: =0
                        X: =40
                        Y: =40
                        ZIndex: =4

                    Created_Date_Stamp_Label_1 As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label_1.Size
                        Text: =ticketInfo.DateCreated
                        Width: =Reporter_Label_1.Width
                        X: =Created_Label_1.Width+Created_Label_1.X
                        Y: =Created_Label_1.Y
                        ZIndex: =5

                    Created_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Created"
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =If(Tags_Label_1.Visible,Tags_ComboBox_1.Y+Tags_ComboBox_1.Height+30, Category_Label_1.Y+Category_Label_1.Height+30)
                        ZIndex: =6

                    Tags_ComboBox_CloseTicket_1 As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        Overflow: =Overflow.Scroll
                        Text: =Concat(Tags_ComboBox.SelectedItems, Concatenate(name, " "))
                        Width: =Assignee_ComboBox_1.Width
                        X: =Rectangle_behind_details_2.X+Reporter_Label_1.Width
                        Y: =Tags_Label_1.Y
                        ZIndex: =7

                    Tags_ComboBox_1 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.Tags = "", Blank(), Filter(Tags_1, name in ticketInfo.Tags))
                        DisplayFields: =["field_2"]
                        Height: =30
                        Items: =Tags_1
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Tags_ComboBox_Value_1.Text}
                            );
                        SearchFields: =["field_2"]
                        SearchItems: =Search(Tags_1,Tags_ComboBox_1.SearchText,"field_2")
                        Size: =Assignee_ComboBox_1.Size
                        Visible: |-
                            =//Tags_Label_1.Visible
                            If(userData.role = "staff",false,showComboBox)
                        Width: =Assignee_ComboBox_1.Width
                        X: =Assignee_ComboBox_1.X
                        Y: =Tags_Label_1.Y
                        ZIndex: =8

                    Tags_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Tags"
                        Visible: =If(userData.role = "staff", false,true)
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =Category_Value_Label_1.Y+Category_Value_Label_1.Height+10
                        ZIndex: =9

                    Category_Value_Label_1 As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label_1.Size
                        Text: =LookUp(Category_1, ID = ticketInfo.MainCategory, name)
                        Width: =Reporter_Label_1.Width
                        X: =Category_Label_1.Width+Category_Label_1.X
                        Y: =Category_Label_1.Y
                        ZIndex: =10

                    Category_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Category"
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =Status_Value_Label_1.Y+Status_Value_Label_1.Height+30
                        ZIndex: =11

                    Status_Value_Label_1 As label:
                        Font: =Font.Georgia
                        Height: =30
                        LineHeight: =1
                        Size: =Reporter_Label_1.Size
                        Text: =LookUp(Tickets,ID = ticketInfo.ID, status)
                        Width: =Reporter_Label_1.Width
                        X: =Status_Label_1.Width+Status_Label_1.X
                        Y: =Status_Label_1.Y
                        ZIndex: =12

                    Status_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Status"
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =If(Additonal_Assign_Label_1.Visible, Additonal_Assign_Label_1.Height+Additonal_Assign_Label_1.Y+10, Reporter_Label_1.Height+Reporter_Label_1.Y+30)
                        ZIndex: =13

                    Additional_Assign_CloseTicket_2 As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        Text: =Concat(Additional_Assign_ComboBox.SelectedItems, Concatenate(fullName, ""))
                        Width: =Assignee_ComboBox_1.Width
                        X: =Rectangle_behind_details_2.X+Reporter_Label_1.Width
                        Y: =Additonal_Assign_Label_1.Y
                        ZIndex: =14

                    Additional_Assign_ComboBox_1 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.AddAssignees = "", Blank(), Filter(Users_1, fullName in ticketInfo.AddAssignees))
                        DisplayFields: =["field_4"]
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter(Users_1, (userRole = "admin" || userRole = "tech") && fullName <> Assignee_Value_Label_1.Text)
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {addAssignees: Additional_Assign_Value_Label_1.Text}
                            );
                        SearchFields: =["field_4"]
                        SearchItems: =[]
                        Size: =Assignee_ComboBox_1.Size
                        Visible: |-
                            =//If(userData.role = "staff",false,true)
                            If(userData.role = "staff",false,showComboBox)
                        Width: =Assignee_ComboBox_1.Width
                        X: =Assignee_ComboBox_1.X
                        Y: =Additonal_Assign_Label_1.Y
                        ZIndex: =15

                    Additonal_Assign_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Other Assignees"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =If(AssignMe_1.Visible, AssignMe_1.Height+AssignMe_1.Y+10, Assignee_Label_1.Height+Assignee_Label_1.Y+10)
                        ZIndex: =16

                    Assignee_Value_CloseTicket_1 As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        Text: =Concat(Assignee_ComboBox.SelectedItems, Concatenate(fullName, ""))
                        Width: =Rectangle_behind_details_2.Width/2
                        X: =Rectangle_behind_details_2.X+Reporter_Label_1.Width
                        Y: =Assignee_Label_1.Y
                        ZIndex: =17

                    Assignee_ComboBox_1 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        Default: |
                            =
                        DefaultSelectedItems: =If(IsBlank(ticketInfo.AssignedTo), Blank(), Filter(Users_1,ID = ticketInfo.AssignedTo))
                        DisplayFields: =["field_4"]
                        Height: =30
                        InputTextPlaceholder: ="Unassigned"
                        Items: =Filter(Users_1, userRole = "tech" || userRole = "admin")
                        NoSelectionText: ="Unassigned"
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId_1),
                                        Blank(),
                                        Value(AssigneeId_1.Text)
                                    )
                                }
                            );
                        SearchFields: =["field_4"]
                        SearchItems: =Search(Filter(Users_1, userRole = "tech" || userRole = "admin"),Assignee_ComboBox_1.SearchText,"field_4")
                        SelectMultiple: =false
                        Size: =If('Single Ticket Info'.Size>3,13, 10)
                        Visible: |-
                            =//If(userData.role = "staff",false,true)
                            If(userData.role = "staff",false,showComboBox)
                        Width: =Rectangle_behind_details_2.Width/2
                        X: =Assignee_Label_1.X+Assignee_Label_1.Width-10
                        Y: =Assignee_Label_1.Y
                        ZIndex: =18

                    Assignee_Value_Label_1 As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =30
                        Size: =16
                        Text: =Concat(Assignee_ComboBox_1.SelectedItems, Concatenate(fullName, ""))
                        Visible: =false
                        Width: =Rectangle_behind_details_2.Width
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Assignee_Label_1.Y 
                        ZIndex: =19

                    Assignee_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Assignee"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =Reporter_Value_Label_1.Y+Reporter_Value_Label_1.Height+10
                        ZIndex: =20

                    AssigneeId_1 As label:
                        Height: =30
                        Text: |-
                            =//Concat(Assignee_ComboBox.SelectedItems, id)
                            If(CountRows(Assignee_ComboBox_1.SelectedItems) = 0, "0",Concat(Assignee_ComboBox_1.SelectedItems, ID) )
                        Visible: =false
                        X: =299
                        Y: =80
                        ZIndex: =21

                    AssignMe_1 As label:
                        Height: =30
                        HoverColor: =ColorScheme.primary
                        OnSelect: |+
                            =UpdateContext({assigneeTo:userData.id}); 
                            Reset(Assignee_ComboBox_1);
                            /* Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: userData.id
                                }
                            );
                            */
                            
                        Size: =10
                        Text: ="Assign to me"
                        Underline: =
                        Visible: |-
                            =
                            If(Value(AssigneeId_1.Text) = userData.id || userData.role="staff",false, true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Value_Label_1.X
                        Y: =Assignee_ComboBox_1.Y+Assignee_ComboBox_1.Height+10
                        ZIndex: =22

                    Reporter_Value_Label_1 As label:
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label_1.Size
                        Text: =LookUp(Users_1, ID = ticketInfo.CreatorId, fullName)
                        Width: =Reporter_Label_1.Width
                        X: =Rectangle_behind_details_2.X+Reporter_Label_1.Width
                        Y: =Reporter_Label_1.Y
                        ZIndex: =23

                    Reporter_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Text: ="Reporter"
                        Width: =Rectangle_behind_details_2.Width/2
                        X: =Rectangle_behind_details_2.X
                        Y: =Rectangle_behind_details_2.Y+Details_label_2.Height+20
                        ZIndex: =24

                    Additional_Assign_Value_Label_1 As label:
                        Height: =30
                        Text: =Concat(Additional_Assign_ComboBox_1.SelectedItems, Concatenate(fullName, ","))
                        Visible: =false
                        X: =60
                        Y: =60
                        ZIndex: =25

                NewMobileActivity As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: =700+(compMobileMenu_22.Height*2)
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =2

                    Activity_History_Vertical_Container_2 As groupContainer.verticalAutoLayoutContainer:
                        Height: =Parent.Height
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMode: =LayoutMode.Auto
                        PaddingLeft: =10
                        PaddingRight: =10
                        PaddingTop: =50
                        Width: =Parent.Width
                        ZIndex: =14

                        Ticket_Description_1 As label:
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =180
                            LayoutMinHeight: =100
                            Overflow: =Overflow.Scroll
                            Size: =If('Single Ticket Info'.Size<2,10,16)
                            Text: |-
                                =ticketInfo.Description
                                //"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Neque viverra justo nec ultrices. In nulla posuere sollicitudin aliquam. Et netus et malesuada fames ac. Pharetra magna ac placerat vestibulum lectus. Sem integer vitae justo eget magna fermentum iaculis eu non. Ac placerat vestibulum lectus mauris. Mattis nunc sed blandit libero volutpat sed cras ornare arcu. Massa ultricies mi quis hendrerit dolor. Nibh nisl condimentum id venenatis a condimentum vitae sapien pellentesque."
                            Width: =Parent.Width-20
                            X: =127
                            Y: =11
                            ZIndex: =1

                        Have_Attachments_Label_1 As label:
                            Align: =Align.Center
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="Attachments"
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), false, true)
                            Width: =Parent.Width
                            ZIndex: =2

                        No_Attachments_Label_1 As label:
                            Align: =Align.Center
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="No Attachments Found."
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), true, false)
                            Width: |
                                =300
                            ZIndex: =3

                        Ticket_Attachment_Gallery_1 As gallery.variableTemplateHeightGallery:
                            BorderThickness: =1
                            DelayItemLoading: =true
                            Height: =If('Single Ticket Info'.Size>1, 50, 30)
                            Items: |-
                                =Filter(
                                    'Ticket Attachments',
                                    ticketID = ticketInfo.ID
                                )
                            Layout: =Layout.Vertical
                            LayoutMinHeight: =287
                            LayoutMinWidth: =320
                            LoadingSpinner: =LoadingSpinner.Data
                            TemplateSize: =25
                            Visible: |-
                                =If(
                                    IsEmpty(
                                        Filter(
                                            'Ticket Attachments',
                                            ticketID = ticketInfo.ID
                                        )
                                    ),
                                    false,
                                    true
                                )
                            Width: =Parent.Width*.95
                            X: =96
                            Y: =157
                            ZIndex: =4

                            HtmlText3_1 As htmlViewer:
                                AutoHeight: =true
                                Height: =25
                                HtmlText: ="<a href='" & ThisItem.'Link to item' & "'>" & ThisItem.'File name with extension' & "</a>" 
                                OnSelect: =Select(Parent)
                                Size: =10
                                Width: =Parent.TemplateWidth
                                ZIndex: =1

                        Comment_History_Container_1 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Height: =Parent.Height/2
                            LayoutMinHeight: =200
                            LayoutMinWidth: =250
                            Width: =Parent.Width
                            ZIndex: =5

                            Add_Comment_Text_Input_1 As text:
                                Default: =
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel_1.X
                                Y: =Comment_Gallery_1.Height
                                ZIndex: =2

                            Add_Comment_Button_1 As button:
                                Fill: =ColorScheme.primary
                                Height: =30
                                OnSelect: |-
                                    =If(Status_Value_Label.Text = "open", If(IsBlank(Trim(Add_Comment_Text_Input_1.Text)),false,Patch(
                                        Comments_1,
                                        Defaults(Comments_1),
                                        {
                                            ticketId: ticketInfo.ID,
                                            message: Add_Comment_Text_Input_1.Text,
                                            creatorId: userData.id
                                        }
                                        );
                                        Reset(Add_Comment_Text_Input_1);
                                        If(
                                            userData.role = "admin" || userData.role = "tech",
                                            Office365Outlook.SendEmailV2(
                                                LookUp(
                                                    Users_1,
                                                    ID = ticketInfo.CreatorId,
                                                    email
                                                ),
                                            Concatenate(
                                                "Update on Ticket # ",
                                                ticketInfo.ID
                                            ),
                                            Concatenate(
                                                "A comment has been added by ",
                                                userData.firstName
                                            ),
                                            {
                                                Cc: Concat(
                                                    Additional_Assign_ComboBox_1.SelectedItems,
                                                    email,
                                                    ";"
                                                )
                                            }
                                        );
                                        
                                        ))
                                    );
                                    
                                    
                                    
                                    /*Patch(
                                        Comments_1,
                                        Defaults(Comments_1),
                                        {
                                            ticketId: ticketInfo.ID,
                                            message: Add_Comment_Text_Input_1.Text,
                                            creatorId: userData.id
                                        }
                                    );
                                    Reset(Add_Comment_Text_Input_1);
                                    If(
                                        userData.role = "admin" || userData.role = "tech",
                                        Office365Outlook.SendEmailV2(
                                            LookUp(
                                                Users_1,
                                                ID = ticketInfo.CreatorId,
                                                email
                                            ),
                                            Concatenate(
                                                "Update on Ticket # ",
                                                ticketInfo.ID
                                            ),
                                            Concatenate(
                                                "A comment has been added by ",
                                                userData.firstName
                                            ),
                                            {
                                                Cc: Concat(
                                                    Additional_Assign_ComboBox_1.SelectedItems,
                                                    email,
                                                    ";"
                                                )
                                            }
                                        );
                                        
                                    )*/
                                Size: =8
                                Text: ="Add Comment"
                                Width: =100
                                X: =Add_Comment_Text_Input_1.Width/6
                                Y: =Close_Ticket_Button_1.Y
                                ZIndex: =4

                            Close_Ticket_Button_1 As button:
                                Fill: =RGBA(151, 0, 0, 1)
                                Height: =30
                                OnSelect: |-
                                    =Set(
                                        varShowResPopup,
                                        true
                                    )
                                Size: =8
                                Text: ="Close Ticket"
                                Visible: =If(LookUp(Tickets,ID = ticketInfo.ID, status) = "open", If(userData.role = "staff",false,true), false)
                                Width: =100
                                X: =Add_Comment_Button_1.X + Add_Comment_Button_1.Width+50
                                Y: =Add_Comment_Text_Input_1.Y+ Add_Comment_Text_Input_1.Height+15
                                ZIndex: =5

                            "Comment_Gallery_1 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderColor: =RGBA(0, 0, 0, 1)
                                Default: =//Last(Filter(Comments, ticketId = ticket))
                                Height: =Parent.Height*.75
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                ShowScrollbar: =false
                                TabIndex: =1
                                TemplatePadding: =3
                                TemplateSize: =150
                                Width: =Parent.Width*.95
                                Y: =40
                                ZIndex: =6

                                CommentOwnerNameLabel_1 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth-DateAndTimeStamp_1.Width - InitialsCircle_1.Width
                                    X: =InitialsCircle_1.X+InitialsCircle_1.Width+5
                                    Y: =12
                                    ZIndex: =1

                                CommentContentLabel_1 As label:
                                    DisplayMode: =DisplayMode.View
                                    Height: =68
                                    OnSelect: =Select(Parent)
                                    Overflow: =Overflow.Scroll
                                    PaddingBottom: =10
                                    PaddingLeft: =10
                                    PaddingTop: =0
                                    Size: =If(CountRows(Filter(MatchAll(CommentContentLabel_1.Text, "\S*(\s|\n?)"), !IsBlank(FullMatch)))>=20, 10, 15)
                                    Text: =ThisItem.message
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth
                                    Y: =CommentOwnerNameLabel_1.Y+CommentOwnerNameLabel_1.Height+5
                                    ZIndex: =2

                                DateAndTimeStamp_1 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    Size: =15
                                    Text: =ThisItem.lastUpdated
                                    Width: =200
                                    X: =Parent.TemplateWidth-Self.Width
                                    Y: =CommentOwnerNameLabel_1.Y
                                    ZIndex: =3

                                InitialsImage_1 As image:
                                    Height: =32
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =32
                                    X: =InitialsCircle_1.X
                                    Y: =10
                                    ZIndex: =6

                                InitialsCircle_1 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =32
                                    Visible: =If(IsEmpty(Filter(Comments_1, ticketId = ticketInfo.ID)), false, true)
                                    Width: =32
                                    X: =10
                                    Y: =10
                                    ZIndex: =7

                                Rectangle7_1 As rectangle:
                                    Fill: =ColorScheme.secondary
                                    Height: =6
                                    OnSelect: =Select(Parent)
                                    Width: =Parent.TemplateWidth
                                    Y: =Parent.TemplateHeight-Self.Height
                                    ZIndex: =8

                    Ticket_Title_1 As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =29
                        PaddingLeft: =10
                        Size: =16
                        Text: =ticketInfo.Title
                        Width: =Parent.Width
                        Y: =15
                        ZIndex: =15

            SingleticketInfoActivityHistoryContainer_2 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =Parent.Height+100
                LayoutMinHeight: =Parent.Height
                LayoutMinWidth: =100
                LayoutMode: =LayoutMode.Auto
                LayoutOverflowY: =LayoutOverflow.Scroll
                Visible: ='Single Ticket Info'.Size>1
                Width: =If('Single Ticket Info'.Size>1, 2*(Parent.Width)/3, Parent.Width)
                ZIndex: =2

                Activity_History_Desktop As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: |-
                        = //200
                        Parent.Height
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =2

                    Activity_History_Vertical_Container As groupContainer.verticalAutoLayoutContainer:
                        Height: =Parent.Height
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMode: =LayoutMode.Auto
                        PaddingLeft: =20
                        PaddingRight: =10
                        PaddingTop: =50
                        Width: =Parent.Width
                        ZIndex: =14

                        Ticket_Description As label:
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =180
                            LayoutMinHeight: =100
                            Overflow: =Overflow.Scroll
                            Size: =If('Single Ticket Info'.Size<2,10,16)
                            Text: |-
                                =ticketInfo.Description
                                //"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Neque viverra justo nec ultrices. In nulla posuere sollicitudin aliquam. Et netus et malesuada fames ac. Pharetra magna ac placerat vestibulum lectus. Sem integer vitae justo eget magna fermentum iaculis eu non. Ac placerat vestibulum lectus mauris. Mattis nunc sed blandit libero volutpat sed cras ornare arcu. Massa ultricies mi quis hendrerit dolor. Nibh nisl condimentum id venenatis a condimentum vitae sapien pellentesque."
                            Width: =Parent.Width-20
                            X: =127
                            Y: =11
                            ZIndex: =1

                        Have_Attachements_Label As label:
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="Attachments"
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), false, true)
                            Width: =Parent.Width
                            ZIndex: =2

                        No_Attachments_Label As label:
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="No Attachments Found."
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), true, false)
                            Width: |
                                =300
                            ZIndex: =3

                        Ticket_Attachment_Gallery As gallery.variableTemplateHeightGallery:
                            BorderThickness: =1
                            DelayItemLoading: =true
                            Height: =If('Single Ticket Info'.Size>1, 50, 30)
                            Items: |-
                                =Filter(
                                    'Ticket Attachments',
                                    ticketID = ticketInfo.ID
                                )
                            Layout: =Layout.Vertical
                            LayoutMinHeight: =287
                            LayoutMinWidth: =320
                            LoadingSpinner: =LoadingSpinner.Data
                            TemplateSize: =25
                            Visible: |-
                                =If(
                                    IsEmpty(
                                        Filter(
                                            'Ticket Attachments',
                                            ticketID = ticketInfo.ID
                                        )
                                    ),
                                    false,
                                    true
                                )
                            Width: =Parent.Width*.95
                            X: =96
                            Y: =157
                            ZIndex: =4

                            HtmlText3 As htmlViewer:
                                AutoHeight: =true
                                Height: =25
                                HtmlText: ="<a href='" & ThisItem.'Link to item' & "'>" & ThisItem.'File name with extension' & "</a>" 
                                OnSelect: =Select(Parent)
                                Size: =10
                                Width: =Parent.TemplateWidth
                                ZIndex: =1

                        Comment_History_Container As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Height: =Parent.Height/2
                            LayoutMinHeight: =200
                            LayoutMinWidth: =250
                            Width: =Parent.Width
                            ZIndex: =5

                            Add_Comment_Text_Input As text:
                                Default: =
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                HintText: ="Add a comment..."
                                OnSelect: =
                                PaddingLeft: =15
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel.X
                                Y: =Comment_Gallery.Height+10
                                ZIndex: =2

                            Add_Comment_Button As button:
                                Fill: =ColorScheme.primary
                                FontWeight: =FontWeight.Bold
                                Height: =30
                                OnSelect: |-
                                    =If(
                                        Status_Value_Label.Text = "open",
                                        If(
                                            IsBlank(Trim(Add_Comment_Text_Input.Text)),
                                            false,
                                            Patch(
                                                Comments_1,
                                                Defaults(Comments_1),
                                                {
                                                    ticketId: ticketInfo.ID,
                                                    message: Add_Comment_Text_Input.Text,
                                                    creatorId: userData.id
                                                }
                                            );
                                            If(
                                                userData.role = "admin" || userData.role = "tech",
                                                SMTP.SendEmailV3(
                                                    {
                                                        From: "sbpdhelpdesk@outlook.com",
                                                        To: LookUp(
                                                            Users_1,
                                                            ID = ticketInfo.CreatorId,
                                                            email
                                                        ),
                                                        Subject: ticketInfo.Title & " - Ticket #" & ticketInfo.ID,
                                                        Body: "<h2> A Comment was added to your request item. </h2>
                                                                <div> Reply From: " & userData.email & "</div>
                                                                <div>" & Add_Comment_Text_Input.Text & "</div>"
                                                    }
                                                );
                                                Reset(Add_Comment_Text_Input),
                                                SMTP.SendEmailV3(
                                                    {
                                                        From: "sbpdhelpdesk@outlook.com",
                                                        To: LookUp(
                                                            Users_1,
                                                            ID = ticketInfo.AssignedTo,
                                                            email
                                                        ),
                                                        Subject: ticketInfo.Title & " - Ticket #" & ticketInfo.ID,
                                                        Body: "<h2> A Comment was added to a ticket you are assigned. </h2>
                                                                <div> Reply From: " & userData.email & "</div>
                                                                <div>" & Add_Comment_Text_Input.Text & "</div>"
                                                    }
                                                );
                                                Reset(Add_Comment_Text_Input);
                                                /*Office365Outlook.SendEmailV2(
                                                    LookUp(
                                                        Users_1,
                                                        ID = ticketInfo.CreatorId,
                                                        email
                                                    ),
                                                    Concatenate(
                                                        "Update on Ticket # ",
                                                        ticketInfo.ID
                                                    ),
                                                    Concatenate(
                                                        "A comment has been added by ",
                                                        userData.firstName
                                                    ),
                                                    {
                                                        Cc: Concat(
                                                            Additional_Assign_ComboBox.SelectedItems,
                                                            email,
                                                            ";"
                                                        )
                                                    }
                                                );*/
                                            )
                                        )
                                    )
                                Size: =12
                                Text: ="Add Comment"
                                Width: =200
                                X: =Add_Comment_Text_Input.Width/4
                                Y: =Add_Comment_Text_Input.Y+Add_Comment_Text_Input.Height+30
                                ZIndex: =4

                            Close_Ticket_Button As button:
                                Fill: =RGBA(151, 0, 0, 1)
                                Height: =30
                                OnSelect: |-
                                    =Set(
                                        varShowResPopup,
                                        true
                                    );
                                    SMTP.SendEmailV3(
                                        {
                                            From: "sbpdhelpdesk@outlook.com",
                                            To: "<Do Not Reply> sbpdhelpdesk@outlook.com",
                                            Bcc: allEmails,
                                            Subject: "Ticket Closed",
                                            Body: "<div>Please be advised that the ticket " & Ticket_Title.Text & " is now closed.</div> <br> <div> Do NOT email or respond to this automated message. This is an automated message created by our notification system. </div>"
                                        }
                                    );
                                Size: =12
                                Text: ="Close Ticket"
                                Visible: =If(LookUp(Tickets,ID = ticketInfo.ID, status) = "open", If(userData.role = "staff",false,true), false)
                                X: =Add_Comment_Button.X + Add_Comment_Button.Width+50
                                Y: =Add_Comment_Button.Y
                                ZIndex: =5

                            "Comment_Gallery As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderColor: =RGBA(0, 0, 0, 1)
                                Default: =//Last(Filter(Comments, ticketId = ticket))
                                Height: =Parent.Height*.75
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                ShowScrollbar: =false
                                TabIndex: =1
                                TemplatePadding: =3
                                TemplateSize: =150
                                Width: =Parent.Width*.95
                                ZIndex: =7

                                CommentOwnerNameLabel As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth-DateAndTimeStamp.Width - InitialsCircle.Width
                                    X: =InitialsCircle.X+InitialsCircle.Width+5
                                    Y: =12
                                    ZIndex: =1

                                CommentContentLabel As label:
                                    DisplayMode: =DisplayMode.View
                                    Height: =68
                                    OnSelect: =Select(Parent)
                                    Overflow: =Overflow.Scroll
                                    PaddingBottom: =10
                                    PaddingLeft: =10
                                    PaddingTop: =0
                                    Size: =If(CountRows(Filter(MatchAll(CommentContentLabel.Text, "\S*(\s|\n?)"), !IsBlank(FullMatch)))>=20, 10, 15)
                                    Text: =ThisItem.message
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth
                                    Y: =CommentOwnerNameLabel.Y+CommentOwnerNameLabel.Height+5
                                    ZIndex: =2

                                DateAndTimeStamp As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    Size: =15
                                    Text: =ThisItem.lastUpdated
                                    Width: =200
                                    X: =Parent.TemplateWidth-Self.Width
                                    Y: =CommentOwnerNameLabel.Y
                                    ZIndex: =3

                                InitialsImage As image:
                                    Height: =32
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =32
                                    X: =InitialsCircle.X
                                    Y: =10
                                    ZIndex: =6

                                InitialsCircle As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =32
                                    Visible: =If(IsEmpty(Filter(Comments_1, ticketId = ticketInfo.ID)), false, true)
                                    Width: =32
                                    X: =10
                                    Y: =10
                                    ZIndex: =7

                                Rectangle7 As rectangle:
                                    Fill: =ColorScheme.secondary
                                    Height: =6
                                    OnSelect: =Select(Parent)
                                    Width: =Parent.TemplateWidth
                                    Y: =Parent.TemplateHeight-Self.Height
                                    ZIndex: =8

                    Ticket_Title As label:
                        Font: =Font.Georgia
                        Height: =30
                        PaddingLeft: =20
                        Size: =If('Single Ticket Info'.Size=1,12,30)
                        Text: =ticketInfo.Title
                        Width: =Parent.Width
                        Y: =15
                        ZIndex: =15

            SingleTicketInfoDetailsContainer_3 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.Start
                FillPortions: =0
                Height: =Parent.Height
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                Visible: ='Single Ticket Info'.Size>1
                Width: =If('Single Ticket Info'.Size>1,Parent.Width/3,Parent.Width)
                ZIndex: =3

                Details_Desktop_Container As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.Start
                    Height: =Parent.Height
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =1

                    Rectangle_behind_details As rectangle:
                        BorderThickness: =3
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =Parent.Height*.90
                        Visible: |-
                            =
                            true
                        Width: =Parent.Width*.90
                        X: =(Parent.Width-Self.Width)/2
                        Y: =(Parent.Height-Self.Height)/2
                        ZIndex: =1

                    Details_label As label:
                        Align: =Align.Center
                        Color: =RGBA(255, 255, 255, 1)
                        Fill: =ColorScheme.primary
                        Height: =38
                        Size: =24
                        Text: ="Details"
                        Width: =Parent.Width*.90
                        X: =Rectangle_behind_details.X
                        Y: =Rectangle_behind_details.Y
                        ZIndex: =2

                    Save_Button As button:
                        Fill: =ColorScheme.primary
                        Height: =30
                        OnSelect: |-
                            =// sql
                            /*
                            If(AssigneeId.Text = "0",
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: 0}
                                ),
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: Value(AssigneeId.Text)},
                                    {addAssignees: Additional_Assign_Value_Label.Text}
                                    )
                            );*/
                            // sharepoint
                            Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Tags_ComboBox_Value.Text},
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId),
                                        Blank(),
                                        Value(AssigneeId.Text)
                                    )
                                },
                                {addAssignees: Additional_Assign_Value_Label.Text}
                            );
                            Refresh(Tickets)
                        Size: =Reporter_Label.Size
                        Text: ="Save"
                        Visible: |-
                            =//If(userData.role = "staff", false,true)
                            If(userData.role = "staff",false,showComboBox)
                        Width: =120
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Created_Label.Height+ Created_Label.Y+30
                        ZIndex: =3

                    Tags_ComboBox_Value As label:
                        Height: =0
                        Text: =Concat(Tags_ComboBox.SelectedItems, Concatenate(name, ","))
                        Visible: =false
                        Width: =0
                        X: =25.5
                        Y: =60
                        ZIndex: =4

                    Created_Date_Stamp_Label As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label.Size
                        Text: =ticketInfo.DateCreated
                        Width: =Reporter_Label.Width
                        X: =Created_Label.Width+Created_Label.X
                        Y: =Created_Label.Y
                        ZIndex: =5

                    Created_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Created"
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =If(Tags_Label.Visible,Tags_ComboBox.Y+Tags_ComboBox.Height+30, Category_Label.Y+Category_Label.Height+30)
                        ZIndex: =6

                    Tags_ComboBox_CloseTicket As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        Overflow: =Overflow.Scroll
                        Size: =15
                        Text: =Concat(Tags_ComboBox.SelectedItems, Concatenate(name, " "))
                        Width: =Reporter_Label.Width
                        X: =Rectangle_behind_details.X+Reporter_Label.Width
                        Y: =Tags_Label.Y
                        ZIndex: =7

                    Tags_ComboBox As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.Tags = "", Blank(), Filter(Tags_1, name in ticketInfo.Tags))
                        DisplayFields: =["field_2"]
                        Height: =30
                        Items: =Tags_1
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Tags_ComboBox_Value.Text}
                            );
                        SearchFields: =["field_2"]
                        SearchItems: =Search(Tags_1,Tags_ComboBox.SearchText,"field_2")
                        Size: =Assignee_ComboBox.Size
                        Visible: |-
                            =//Tags_Label.Visible
                            If(userData.role = "staff",false,showComboBox)
                        Width: =Assignee_ComboBox.Width
                        X: =Assignee_ComboBox.X
                        Y: =Tags_Label.Y
                        ZIndex: =8

                    Tags_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Tags"
                        Visible: =If(userData.role = "staff", false,true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =Category_Value_Label.Y+Category_Value_Label.Height+10
                        ZIndex: =9

                    Category_Value_Label As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label.Size
                        Text: =LookUp(Category_1, ID = ticketInfo.MainCategory, name)
                        Width: =Reporter_Label.Width
                        X: =Category_Label.Width+Category_Label.X
                        Y: =Category_Label.Y
                        ZIndex: =10

                    Category_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Category"
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =Status_Value_Label.Y+Status_Value_Label.Height+30
                        ZIndex: =11

                    Status_Value_Label As label:
                        Font: =Font.Georgia
                        Height: =30
                        LineHeight: =1
                        Size: =Reporter_Label.Size
                        Text: =LookUp(Tickets,ID = ticketInfo.ID, status)
                        Width: =Reporter_Label.Width
                        X: =Status_Label.Width+Status_Label.X
                        Y: =Status_Label.Y
                        ZIndex: =12

                    Status_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Status"
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =If(Additonal_Assign_Label.Visible, Additonal_Assign_Label.Height+Additonal_Assign_Label.Y+10, Reporter_Label.Height+Reporter_Label.Y+30)
                        ZIndex: =13

                    Additional_Assign_CloseTicket As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        Size: =15
                        Text: =Concat(Additional_Assign_ComboBox.SelectedItems, Concatenate(fullName, ""))
                        Width: =Reporter_Label.Width
                        X: =Rectangle_behind_details.X+Reporter_Label.Width
                        Y: =Additonal_Assign_Label.Y
                        ZIndex: =14

                    Additional_Assign_ComboBox As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.AddAssignees = "", Blank(), Filter(Users_1, fullName in ticketInfo.AddAssignees))
                        DisplayFields: =["field_4"]
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter(Users_1, (userRole = "admin" || userRole = "tech") && fullName <> Assignee_Value_Label.Text)
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {addAssignees: Additional_Assign_Value_Label.Text}
                            );
                        SearchFields: =["field_4"]
                        SearchItems: =[]
                        Size: =Assignee_ComboBox.Size
                        Visible: |-
                            =//If(userData.role = "staff",false,true)
                            If(userData.role = "staff",false,showComboBox)
                        Width: =Assignee_ComboBox.Width
                        X: =Assignee_ComboBox.X
                        Y: =Additonal_Assign_Label.Y
                        ZIndex: =15

                    Additonal_Assign_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Other Assignees"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =If(AssignMe.Visible, AssignMe.Height+AssignMe.Y+10, Assignee_Label.Height+Assignee_Label.Y+10)
                        ZIndex: =16

                    Assignee_Value_CloseTicket As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        Size: =15
                        Text: =Concat(Assignee_ComboBox.SelectedItems, Concatenate(fullName, ""))
                        Width: =Reporter_Label.Width
                        X: =Rectangle_behind_details.X+Reporter_Label.Width
                        Y: =Assignee_Label.Y
                        ZIndex: =17

                    Assignee_ComboBox As combobox:
                        ChevronBackground: =ColorScheme.primary
                        Default: |
                            =
                        DefaultSelectedItems: =If(IsBlank(ticketInfo.AssignedTo), Blank(), Filter(Users_1,ID = ticketInfo.AssignedTo))
                        DisplayFields: =["field_4"]
                        Height: =30
                        InputTextPlaceholder: ="Unassigned"
                        Items: =Filter(Users_1, userRole = "tech" || userRole = "admin")
                        NoSelectionText: ="Unassigned"
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId),
                                        Blank(),
                                        Value(AssigneeId.Text)
                                    )
                                }
                            );
                        SearchFields: =["field_4"]
                        SearchItems: =Search(Filter(Users_1, userRole = "tech" || userRole = "admin"),Assignee_ComboBox.SearchText,"field_4")
                        SelectMultiple: =false
                        Size: =If('Single Ticket Info'.Size>3,13, 10)
                        Visible: |-
                            =//If(userData.role = "staff",false,true)
                            If(userData.role = "staff",false,showComboBox)
                        Width: =Rectangle_behind_details.Width/2
                        X: =Assignee_Label.X+Assignee_Label.Width-10
                        Y: =Assignee_Label.Y
                        ZIndex: =18

                    Assignee_Value_Label As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =30
                        Size: =16
                        Text: =Concat(Assignee_ComboBox.SelectedItems, Concatenate(fullName, ""))
                        Visible: =false
                        Width: =Rectangle_behind_details.Width
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Assignee_Label.Y 
                        ZIndex: =19

                    Assignee_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Assignee"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =Reporter_Value_Label.Y+Reporter_Value_Label.Height+10
                        ZIndex: =20

                    AssigneeId As label:
                        Height: =30
                        Text: |-
                            =//Concat(Assignee_ComboBox.SelectedItems, id)
                            If(CountRows(Assignee_ComboBox.SelectedItems) = 0, "0",Concat(Assignee_ComboBox.SelectedItems, ID) )
                        Visible: =false
                        X: =284.5
                        Y: =100
                        ZIndex: =21

                    AssignMe As label:
                        Height: =30
                        HoverColor: =ColorScheme.primary
                        OnSelect: |+
                            =UpdateContext({assigneeTo:userData.id}); 
                            Reset(Assignee_ComboBox);
                            /* Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: userData.id
                                }
                            );
                            */
                            
                        Size: =Reporter_Label.Size
                        Text: ="Assign to me"
                        Underline: =
                        Visible: |-
                            =
                            If(Value(AssigneeId.Text) = userData.id || userData.role="staff",false, true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Value_Label.X
                        Y: =Assignee_ComboBox.Y+Assignee_ComboBox.Height+10
                        ZIndex: =22

                    Reporter_Value_Label As label:
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label.Size
                        Text: =LookUp(Users_1, ID = ticketInfo.CreatorId, fullName)
                        Width: =Reporter_Label.Width
                        X: =Rectangle_behind_details.X+Reporter_Label.Width
                        Y: =Reporter_Label.Y
                        ZIndex: =23

                    Reporter_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =compPageTextSizeFormatter_1.FinalTextSize
                        Text: ="Reporter"
                        Width: =Rectangle_behind_details.Width/2
                        X: =Rectangle_behind_details.X
                        Y: =Rectangle_behind_details.Y+Details_label.Height+20
                        ZIndex: =24

                    Additional_Assign_Value_Label As label:
                        Height: =30
                        Text: =Concat(Additional_Assign_ComboBox.SelectedItems, Concatenate(fullName, ","))
                        Visible: =false
                        X: =45.5
                        Y: =80
                        ZIndex: =25

    compMobileMenu_22 As compMobileMenu:
        Visible: ='Single Ticket Info'.Size=1
        Width: =Parent.Width
        Y: =Parent.Height-Self.Height
        ZIndex: =2

    PopUp_Background As rectangle:
        Fill: =RGBA(56, 96, 178, 0.5)
        Height: =Parent.Height
        OnSelect: =varShowResPopup
        Visible: =varShowResPopup
        Width: =Parent.Width
        ZIndex: =3

    SingleTicketInfo_Resolution_Container As groupContainer:
        Height: =484
        Visible: =varShowResPopup
        Width: =729
        X: =(Parent.Width/2 - Self.Width/2)
        Y: =(Parent.Height/2 - Self.Height/2)
        ZIndex: =4

        Rectangle_Resolution As rectangle:
            Fill: =RGBA(241, 244, 249, 1)
            Height: =368
            Visible: =varShowResPopup
            Width: =648
            X: =Parent.Width/2 - Self.Width/2
            Y: =Parent.Height/2 - Self.Height/2
            ZIndex: =1

        Title_Resolution As label:
            Align: =Align.Center
            Fill: =RGBA(255, 191, 0, 1)
            Text: ="Close Current Ticket"
            Visible: =varShowResPopup
            Width: =649
            X: =Parent.Width/2 - Self.Width/2
            Y: =(Parent.Height/2 - Self.Height/2) - 200
            ZIndex: =2

        Prompt_Resolution As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Height: =96
            Text: |-
                ="Are you sure you want to close this ticket?
                If yes, please fill out the resolution to this ticket.
                "
            Visible: =varShowResPopup
            Width: =648
            X: =Parent.Width/2 - Self.Width/2
            Y: =(Parent.Height/2 - Self.Height/2) - 130
            ZIndex: =3

        Text_Input_Resolution As text:
            Default: =""
            Height: =155
            HintText: ="Please fill out a description for the resolution."
            Mode: =TextMode.MultiLine
            Visible: =varShowResPopup
            Width: =442
            X: =(Parent.Width/2 - Self.Width/2)
            Y: =Parent.Height/2 - Self.Height/2
            ZIndex: =4

        Cancel_Resolution_Button As button:
            OnSelect: =Set(varShowResPopup, false)
            Text: |-
                ="Cancel
                "
            Visible: =varShowResPopup
            X: =(Parent.Width/2 - Self.Width/2) - 100
            Y: =(Parent.Height/2 - Self.Height/2) + 120
            ZIndex: =5

        Close_Ticket_Resolution_Button As button:
            OnSelect: |-
                =Patch(
                    Tickets,
                    LookUp(
                        Tickets,
                        ID = ticketInfo.ID
                    ),
                    {
                        resolution: Text_Input_Resolution.Text,
                        lastUpdated: Now(),
                        dateClosed: Now(),
                        status: "closed",
                        updatedBy: userData.id
                    }
                );
                Set(
                    varShowResPopup,
                    false
                );
                Reset(Text_Input_Resolution);
                Refresh(Tickets);
            Text: |-
                ="Close Ticket
                "
            Visible: =varShowResPopup
            X: =(Parent.Width/2 - Self.Width/2) + 100
            Y: =(Parent.Height/2 - Self.Height/2) + 120
            ZIndex: =6

    compWebHeader_4 As compWebHeader:
        CompScreenSize: ='Single Ticket Info'.Size
        ZIndex: =5

    SingleTicketInfo_Title As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Fill: =ColorScheme.primary
        Height: |-
            =48
            //50
        Size: =If('Single Ticket Info'.Size=1, titleText.mobileSize, titleText.desktopSize)
        Text: ="Ticket Details"
        Width: =Parent.Width
        Y: =compWebHeader_4.Height
        ZIndex: =6

    SingleTicketInfo_Back As icon.BackArrow:
        Color: =ColorScheme.secondary
        Height: =49
        Icon: =Icon.BackArrow
        OnSelect: =Back(ScreenTransition.Fade)
        Width: =49
        X: =15
        Y: =SingleTicketInfo_Title.Y
        ZIndex: =7

    compWebMenu_10 As compWebMenu:
        Height: =If(showMenu, App.Height, compWebHeader_4.Height)
        Visible: ='Single Ticket Info'.Size > 1
        ZIndex: =8

    compPageTextSizeFormatter_1 As compPageTextSizeFormatter:
        PageSizeVariable: ='Single Ticket Info'.Size
        Visible: =false
        ZIndex: =9

