"'Single Ticket Info' As screen":
    OnHidden: |-
        =Set(editMessage, false);
        Set(addMessage, true);
    OnVisible: |
        =UpdateContext({primAssignee:Blank()});
        Refresh(Comments_1);
        If(ticketInfo.Status = "open", Set(closeTicketButtonVis, true), Set(closeTicketButtonVis, false));
        Set(primAssignee, If(IsBlank(ticketInfo.AssignedTo), Blank(), Filter(Users_1,ID = ticketInfo.AssignedTo)));

    SingleTicketInfoMainContainer As groupContainer.horizontalAutoLayoutContainer:
        Height: =Parent.Height
        LayoutAlignItems: =LayoutAlignItems.Center
        LayoutJustifyContent: =LayoutJustifyContent.Center
        LayoutMode: =LayoutMode.Auto
        Width: =Parent.Width
        ZIndex: =1

    SingleTicketInfoVerticalLayoutContainer As groupContainer.verticalAutoLayoutContainer:
        Height: =Parent.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutMode: =LayoutMode.Auto
        LayoutOverflowY: =LayoutOverflow.Scroll
        PaddingTop: =120
        Width: =Parent.Width
        ZIndex: =2

        SingleTicketInfoMainContent_2 As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            FillPortions: =0
            Height: =Parent.Height-Ticket_Title_1.Height-compWebHeader_4.Height
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            LayoutOverflowY: =LayoutOverflow.Scroll
            LayoutWrap: =If(SingleTicketInfoDetailsContainer_3.Visible,false,true)
            Width: =Parent.Width
            ZIndex: =4

            SingleTicketInfoMobileViewContainer As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.Start
                Height: =Parent.Height
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                LayoutOverflowY: =LayoutOverflow.Scroll
                LayoutWrap: =true
                PaddingTop: =20
                Visible: ='Single Ticket Info'.Size=1
                ZIndex: =1

                NewMobileDetails As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: =If(userData.role = "staff",400,475)
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =1

                    Rectangle_behind_details_2 As rectangle:
                        BorderThickness: =3
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =Parent.Height*.90
                        Visible: |-
                            =
                            true
                        Width: =Parent.Width*.90
                        X: =(Parent.Width-Self.Width)/2
                        Y: =(Parent.Height-Self.Height)/2
                        ZIndex: =1

                    Image_behind_Details_label_2 As image:
                        Height: =220
                        Image: ='image (2)'
                        Visible: =false
                        Width: =375
                        X: =31
                        Y: =81
                        ZIndex: =2

                    Details_label_2 As label:
                        Align: =Align.Center
                        Color: =RGBA(255, 255, 255, 1)
                        Fill: =ColorScheme.primary
                        Height: =38
                        Size: =24
                        Text: ="Details"
                        Width: =Parent.Width*.90
                        X: =Rectangle_behind_details_2.X
                        Y: =Rectangle_behind_details_2.Y
                        ZIndex: =3

                    TextInput1_6 As text:
                        BorderThickness: =3
                        Default: =//Search(If(filterStatus.Selected.Result = "All", CurrentTicketInfo, Filter(CurrentTicketInfo, status = filterStatus.Selected.Result)), searchTicketQuery, "title", "description")
                        DisplayMode: =DisplayMode.View
                        Height: =344
                        Mode: =TextMode.MultiLine
                        Visible: |
                            =false
                        Width: =396
                        X: =(Parent.Width-Self.Width)/2
                        Y: =142
                        ZIndex: =4

                    Title_Label_1 As label:
                        Height: =58
                        Text: =""
                        Width: =93
                        Y: =84
                        ZIndex: =5

                    Save_Button_1 As button:
                        Fill: =ColorScheme.primary
                        Height: =20
                        OnSelect: |-
                            =// sql
                            /*
                            If(AssigneeId.Text = "0",
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: 0}
                                ),
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: Value(AssigneeId.Text)},
                                    {addAssignees: Additional_Assign_Value_Label.Text}
                                    )
                            );*/
                            // sharepoint
                            Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Label4_2.Text},
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId_1),
                                        Blank(),
                                        Value(AssigneeId_1.Text)
                                    )
                                },
                                {addAssignees: Additional_Assign_Value_Label_1.Text}
                            );
                            Refresh(Tickets)
                        Size: =8
                        Text: ="Apply"
                        Visible: =If(userData.role = "staff", false,true)
                        Width: =80
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Created_Label_1.Height+ Created_Label_1.Y
                        ZIndex: =6

                    Label4_2 As label:
                        Height: =0
                        Text: =Concat(ComboBox1_2.SelectedItems, Concatenate(name, ","))
                        Visible: =false
                        Width: =0
                        X: =40
                        Y: =40
                        ZIndex: =7

                    Created_Date_Stamp_Label_1 As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label_1.Size
                        Text: =ticketInfo.DateCreated
                        Width: =Reporter_Label_1.Width
                        X: =Created_Label_1.Width+Created_Label_1.X
                        Y: =Created_Label_1.Y
                        ZIndex: =8

                    Created_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Created"
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =If(Tags_Label_1.Visible,ComboBox1_2.Y+ComboBox1_2.Height+30, Category_Label_1.Y+Category_Label_1.Height+30)
                        ZIndex: =9

                    ComboBox1_2 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.Tags = "", Blank(), Filter(Tags_1, name in ticketInfo.Tags))
                        DisplayFields: =["field_2"]
                        Height: =30
                        Items: =Tags_1
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Label4_2.Text}
                            );
                        SearchFields: =["field_2"]
                        SearchItems: =Search(Tags_1,ComboBox1_2.SearchText,"field_2")
                        Size: =Assignee_ComboBox_1.Size
                        Visible: =Tags_Label_1.Visible
                        Width: =Assignee_ComboBox_1.Width
                        X: =Assignee_ComboBox_1.X
                        Y: =Tags_Label_1.Y
                        ZIndex: =10

                    Tags_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Tags"
                        Visible: =If(userData.role = "staff", false,true)
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =Category_Value_Label_1.Y+Category_Value_Label_1.Height+10
                        ZIndex: =11

                    Category_Value_Label_1 As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label_1.Size
                        Text: =LookUp(Category_1, ID = ticketInfo.MainCategory, name)
                        Width: =Reporter_Label_1.Width
                        X: =Category_Label_1.Width+Category_Label_1.X
                        Y: =Category_Label_1.Y
                        ZIndex: =12

                    Category_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Category"
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =Status_Value_Label_1.Y+Status_Value_Label_1.Height+30
                        ZIndex: =13

                    Status_Value_Label_1 As label:
                        Font: =Font.Georgia
                        Height: =30
                        LineHeight: =1
                        Size: =Reporter_Label_1.Size
                        Text: =LookUp(Tickets,ID = ticketInfo.ID, status)
                        Width: =Reporter_Label_1.Width
                        X: =Status_Label_1.Width+Status_Label_1.X
                        Y: =Status_Label_1.Y
                        ZIndex: =14

                    Status_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Status"
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =If(Additonal_Assign_Label_1.Visible,If(AssignMe_1.Visible,AssignMe_1.Y+AssignMe_1.Height, Additonal_Assign_Label_1.Height+Additonal_Assign_Label_1.Y+30), Reporter_Label_1.Height+Reporter_Label_1.Y+30)
                        ZIndex: =15

                    Additional_Assign_ComboBox_1 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.AddAssignees = "", Blank(), Filter(Users_1, fullName in ticketInfo.AddAssignees))
                        DisplayFields: =["field_4"]
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter(Users_1, (userRole = "admin" || userRole = "tech") && fullName <> Assignee_Value_Label_1.Text)
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {addAssignees: Additional_Assign_Value_Label_1.Text}
                            );
                        SearchFields: =["field_4"]
                        SearchItems: =[]
                        Size: =Assignee_ComboBox_1.Size
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Assignee_ComboBox_1.Width
                        X: =Assignee_ComboBox_1.X
                        Y: =Additonal_Assign_Label_1.Y
                        ZIndex: =16

                    Additonal_Assign_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Other Assignees"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =Assignee_ComboBox_1.Height+Assignee_ComboBox_1.Y+10
                        ZIndex: =17

                    Assignee_ComboBox_1 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        Default: |
                            =
                        DefaultSelectedItems: =If(IsBlank(ticketInfo.AssignedTo), Blank(), Filter(Users_1,ID = ticketInfo.AssignedTo))
                        DisplayFields: =["field_4"]
                        Height: =30
                        InputTextPlaceholder: ="Unassigned"
                        Items: =Filter(Users_1, userRole = "tech" || userRole = "admin")
                        NoSelectionText: ="Unassigned"
                        OnChange: |-
                            =Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId_1),
                                        Blank(),
                                        Value(AssigneeId_1.Text)
                                    )
                                }
                            );
                        SearchFields: =["field_4"]
                        SearchItems: =Search(Filter(Users_1, userRole = "tech" || userRole = "admin"),Assignee_ComboBox_1.SearchText,"field_4")
                        SelectMultiple: =false
                        Size: =If('Single Ticket Info'.Size>3,13, 10)
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Rectangle_behind_details_2.Width/2
                        X: =Assignee_Label_1.X+Assignee_Label_1.Width-10
                        Y: =Assignee_Label_1.Y
                        ZIndex: =18

                    Assignee_Value_Label_1 As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =30
                        Size: =16
                        Text: =Concat(Assignee_ComboBox_1.SelectedItems, Concatenate(fullName, ""))
                        Visible: =false
                        Width: =Rectangle_behind_details_2.Width
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Assignee_Label_1.Y 
                        ZIndex: =19

                    Assignee_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label_1.Size
                        Text: ="Assignee"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label_1.Width
                        X: =Reporter_Label_1.X
                        Y: =Reporter_Value_Label_1.Y+Reporter_Value_Label_1.Height+10
                        ZIndex: =20

                    AssigneeId_1 As label:
                        Height: =30
                        Text: |-
                            =//Concat(Assignee_ComboBox.SelectedItems, id)
                            If(CountRows(Assignee_ComboBox_1.SelectedItems) = 0, "0",Concat(Assignee_ComboBox_1.SelectedItems, ID) )
                        Visible: =false
                        X: =299
                        Y: =80
                        ZIndex: =21

                    AssignMe_1 As label:
                        Height: =30
                        HoverColor: =ColorScheme.primary
                        OnSelect: |+
                            =UpdateContext({assigneeTo:userData.id}); 
                            Reset(Assignee_ComboBox_1);
                            /* Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: userData.id
                                }
                            );
                            */
                            
                        Size: =10
                        Text: ="Assign to me"
                        Underline: =
                        Visible: =If(Value(AssigneeId_1.Text) = userData.id || userData.role="staff",false, true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Value_Label_1.X
                        Y: =Additional_Assign_ComboBox_1.Y+Additional_Assign_ComboBox_1.Height+20
                        ZIndex: =22

                    Reporter_Value_Label_1 As label:
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label_1.Size
                        Text: =LookUp(Users_1, ID = ticketInfo.CreatorId, fullName)
                        Width: =Reporter_Label_1.Width
                        X: =Rectangle_behind_details_2.X+Reporter_Label_1.Width
                        Y: =Reporter_Label_1.Y
                        ZIndex: =23

                    Reporter_Label_1 As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Text: ="Reporter"
                        Width: =Rectangle_behind_details_2.Width/2
                        X: =Rectangle_behind_details_2.X
                        Y: =Rectangle_behind_details_2.Y+Details_label_2.Height+20
                        ZIndex: =24

                    Additional_Assign_Value_Label_1 As label:
                        Height: =30
                        Text: =Concat(Additional_Assign_ComboBox_1.SelectedItems, Concatenate(fullName, ","))
                        Visible: =false
                        X: =60
                        Y: =60
                        ZIndex: =25

                NewMobileActivity As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: =700
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =2

                    Container9_2 As groupContainer.verticalAutoLayoutContainer:
                        Height: =Parent.Height
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMode: =LayoutMode.Auto
                        PaddingLeft: =10
                        PaddingRight: =10
                        PaddingTop: =50
                        Width: =Parent.Width
                        ZIndex: =14

                        Description_label_5 As label:
                            Font: =Font.Georgia
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size=1,10,20)
                            Text: ="Description"
                            Visible: =false
                            Width: =Parent.Width
                            X: =40
                            Y: =40
                            ZIndex: =1

                        Label18_5 As label:
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =180
                            LayoutMinHeight: =100
                            Overflow: =Overflow.Scroll
                            Size: =If('Single Ticket Info'.Size<2,10,16)
                            Text: |-
                                =//ticketInfo.Description
                                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Neque viverra justo nec ultrices. In nulla posuere sollicitudin aliquam. Et netus et malesuada fames ac. Pharetra magna ac placerat vestibulum lectus. Sem integer vitae justo eget magna fermentum iaculis eu non. Ac placerat vestibulum lectus mauris. Mattis nunc sed blandit libero volutpat sed cras ornare arcu. Massa ultricies mi quis hendrerit dolor. Nibh nisl condimentum id venenatis a condimentum vitae sapien pellentesque."
                            Width: =Parent.Width-20
                            X: =127
                            Y: =11
                            ZIndex: =2

                        Label21_1 As label:
                            Align: =Align.Center
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="Attachments"
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), false, true)
                            Width: =Parent.Width
                            ZIndex: =3

                        Label25_1 As label:
                            Align: =Align.Center
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="No Attachments Found."
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), true, false)
                            Width: |
                                =300
                            ZIndex: =4

                        Gallery5_2 As gallery.variableTemplateHeightGallery:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderThickness: =1
                            DelayItemLoading: =true
                            FillPortions: =0
                            Height: =If('Single Ticket Info'.Size>1, 50, 30)
                            Items: |-
                                =Filter(
                                    'Ticket Attachments',
                                    ticketID = ticketInfo.ID
                                )
                            Layout: =Layout.Vertical
                            LayoutMinHeight: =287
                            LayoutMinWidth: =100
                            LoadingSpinner: =LoadingSpinner.Data
                            TemplateSize: =25
                            Visible: |-
                                =If(
                                    IsEmpty(
                                        Filter(
                                            'Ticket Attachments',
                                            ticketID = ticketInfo.ID
                                        )
                                    ),
                                    false,
                                    true
                                )
                            Width: =Parent.Width*.95
                            X: =96
                            Y: =157
                            ZIndex: =5

                            HtmlText3_2 As htmlViewer:
                                AutoHeight: =true
                                Height: =25
                                HtmlText: ="<a href='" & ThisItem.'Link to item' & "'>" & ThisItem.'File name with extension' & "</a>" 
                                OnSelect: =Select(Parent)
                                Size: =10
                                Width: =Parent.TemplateWidth
                                ZIndex: =1

                        Label_above_comments_6 As label:
                            AlignInContainer: =AlignInContainer.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =If('Single Ticket Info'.Size<3, 20, 30)
                            Size: =If('Single Ticket Info'.Size<2,10,14)
                            Text: ="Comments"
                            Visible: =false
                            Width: =Parent.Width
                            X: =60
                            Y: =60
                            ZIndex: =6

                        Container18_6 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Height: =Parent.Height/2
                            LayoutMinHeight: =200
                            LayoutMinWidth: =250
                            Width: =Parent.Width
                            ZIndex: =7

                            TextInput2_12 As text:
                                Default: =
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel_3.X
                                Y: =Gallery2_13.Height
                                ZIndex: =2

                            TextInput9_12 As text:
                                Default: =If(editMessage, Gallery2_13.Selected.message, Blank())
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel_3.X
                                Y: =Gallery2_13.Height
                                ZIndex: =3

                            Button1_13 As button:
                                Fill: =ColorScheme.primary
                                Height: =30
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput9_4.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput9_4);
                                        If(
                                            userData.role = "admin" || userData.role = "tech",
                                            Office365Outlook.SendEmailV2(
                                                LookUp(
                                                    Users_1,
                                                    ID = ticketInfo.CreatorId,
                                                    email
                                                ),
                                                Concatenate(
                                                    "Update on Ticket # ",
                                                    ticketInfo.ID
                                                ),
                                                Concatenate(
                                                    "A comment has been added by ",
                                                    userData.firstName
                                                ),
                                                {
                                                    Cc: Concat(
                                                        Additional_Assign_ComboBox_1.SelectedItems,
                                                        email,
                                                        ";"
                                                    )
                                                }
                                            );
                                        )
                                    );
                                Size: =8
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =100
                                X: =TextInput2_12.X
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =4

                            Close_Ticket_Button_12 As button:
                                Fill: =RGBA(151, 0, 0, 1)
                                Height: =30
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Size: =8
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                Visible: =If(LookUp(Tickets,ID = ticketInfo.ID, status) = "open", If(userData.role = "staff",false,true), false)
                                Width: =100
                                X: =Button1_13.X + Button1_13.Width+50
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =5

                            "Gallery2_13 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderColor: =RGBA(0, 0, 0, 1)
                                Default: =//Last(Filter(Comments, ticketId = ticket))
                                Height: =Parent.Height*.75
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                ShowScrollbar: =false
                                TabIndex: =1
                                TemplatePadding: =3
                                TemplateSize: =150
                                Width: =Parent.Width*.95
                                ZIndex: =6

                                CommentOwnerNameLabel_3 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingTop: =0
                                    Size: =13
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth-DateAndTimeStamp_3.Width - InitialsCircle_3.Width
                                    X: =InitialsCircle_3.X+InitialsCircle_3.Width+5
                                    Y: =12
                                    ZIndex: =1

                                CommentContentLabel_3 As label:
                                    DisplayMode: =DisplayMode.View
                                    Height: =97
                                    OnSelect: =Select(Parent)
                                    Overflow: =Overflow.Scroll
                                    PaddingBottom: =10
                                    PaddingLeft: =0
                                    PaddingTop: =0
                                    Size: =If(CountRows(Filter(MatchAll(CommentContentLabel_3.Text, "\S*(\s|\n?)"), !IsBlank(FullMatch)))>=20, 10, 13)
                                    Text: =ThisItem.message
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth
                                    Y: =CommentOwnerNameLabel_3.Y+CommentOwnerNameLabel_3.Height+5
                                    ZIndex: =2

                                DateAndTimeStamp_3 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    Size: =8
                                    Text: =ThisItem.lastUpdated
                                    Width: =100
                                    X: =Parent.TemplateWidth-Self.Width
                                    Y: =CommentOwnerNameLabel_3.Y
                                    ZIndex: =3

                                InitialsImage_3 As image:
                                    Height: =20
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =20
                                    Y: =12
                                    ZIndex: =6

                                InitialsCircle_3 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =20
                                    Visible: =If(IsEmpty(Filter(Comments_1, ticketId = ticketInfo.ID)), false, true)
                                    Width: =20
                                    Y: =12
                                    ZIndex: =7

                                Rectangle1 As rectangle:
                                    Fill: =ColorScheme.secondary
                                    Height: =6
                                    OnSelect: =Select(Parent)
                                    Width: =Parent.TemplateWidth
                                    Y: =Parent.TemplateHeight-Self.Height
                                    ZIndex: =8

                        ContainerforCommentsOnly_3 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Visible: =false
                            ZIndex: =8

                            Close_Ticket_Button_11 As button:
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                X: =250
                                Y: =298
                                ZIndex: =1

                            Button1_12 As button:
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput2_13.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput2_13);
                                        
                                    );
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =200
                                X: =12
                                Y: =298
                                ZIndex: =2

                            TextInput2_11 As text:
                                Default: =
                                Height: =72
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =879
                                Y: =201
                                ZIndex: =3

                            TextInput9_11 As text:
                                Default: =If(editMessage, Gallery2_14.Selected.message, Blank())
                                Height: =72
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width - 100
                                Y: =199
                                ZIndex: =4

                            "Gallery2_12 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderStyle: =BorderStyle.None
                                Height: =186
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                TabIndex: =1
                                TemplateSize: =184
                                Width: =879
                                ZIndex: =5

                                Title3_8 As label:
                                    Height: =49
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =268
                                    X: =102
                                    Y: =22
                                    ZIndex: =1

                                Subtitle2_8 As label:
                                    Height: =74
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =10
                                    PaddingLeft: =1
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =ThisItem.title
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =776
                                    X: =93
                                    Y: =71
                                    ZIndex: =2

                                Label1_15 As label:
                                    Height: =34
                                    OnSelect: =Select(Parent)
                                    Text: =ThisItem.lastUpdated
                                    Width: =263
                                    X: =356
                                    Y: =22
                                    ZIndex: =3

                                Button11_12 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: |-
                                        =Set(editMessage, true);
                                        Set(addMessage, false);
                                        Set(editableRec, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Edit"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =62
                                    X: =93
                                    Y: =145
                                    ZIndex: =4

                                Button11_13 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: =Remove(Comments_1, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Delete"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =105
                                    X: =159
                                    Y: =145
                                    ZIndex: =5

                                Image7_11 As image:
                                    Height: =76
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =91
                                    X: =4
                                    Y: =8
                                    ZIndex: =6

                                Circle3_8 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =95
                                    Width: =93
                                    X: =2
                                    ZIndex: =7

                    Title_label_7 As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =29
                        PaddingLeft: =10
                        Size: =16
                        Text: =ticketInfo.Title
                        Width: =Parent.Width
                        Y: =15
                        ZIndex: =15

                    Group1_3 As group:
                        Height: =5
                        Width: =5
                        X: =40
                        Y: =40
                        ZIndex: =16

                        Label_above_comments_7 As label:
                            Align: =Align.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =44
                            Size: =20
                            Text: ="Comments"
                            Visible: =false
                            Width: =302
                            X: =286
                            Y: =267
                            ZIndex: =1

                        TextInput2_13 As text:
                            Default: =
                            Height: =72
                            HintText: ="Add a comment..."
                            OnSelect: =
                            Visible: =false //addMessage
                            Width: =879
                            X: =21
                            Y: =496
                            ZIndex: =2

                        TextInput9_13 As text:
                            Default: =If(editMessage, Gallery2_14.Selected.message, Blank())
                            Height: =72
                            OnSelect: =editMessage
                            Visible: =false //editMessage
                            Width: =Parent.Width - 100
                            X: =32
                            Y: =467
                            ZIndex: =3

                        Button1_14 As button:
                            OnSelect: |
                                =If(
                                    addMessage,
                                    Patch(
                                        Comments_1,
                                        Defaults(Comments_1),
                                        {
                                            ticketId: ticketInfo.ID,
                                            message: TextInput2_13.Text,
                                            creatorId: userData.id
                                        }
                                    );
                                    Reset(TextInput2_13);
                                    
                                );
                            Text: |-
                                =If(
                                    addMessage,
                                    "Add Comment",
                                    If(
                                        editMessage,
                                        "Update Comment"
                                    )
                                )
                            Visible: =false
                            Width: =200
                            X: =32
                            Y: =578
                            ZIndex: =4

                        Close_Ticket_Button_13 As button:
                            OnSelect: |-
                                =If(
                                    addMessage,
                                    Set(
                                        varShowResPopup,
                                        true
                                    ),
                                    If(
                                        editMessage,
                                        Set(
                                            addMessage,
                                            true
                                        ) && Set(
                                            editMessage,
                                            false
                                        )
                                    )
                                )
                            Text: |-
                                =If(
                                    editMessage,
                                    "Cancel Update",
                                    If(
                                        addMessage,
                                        "Close Ticket"
                                    )
                                )
                            Visible: =false
                            X: =407
                            Y: =578
                            ZIndex: =5

                        "Gallery2_14 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                            AccessibleLabel: =
                            BorderStyle: =BorderStyle.None
                            Height: =185
                            Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                            Layout: =Layout.Vertical
                            TabIndex: =1
                            TemplateSize: =184
                            Visible: =false
                            Width: =879
                            X: =32
                            Y: =302
                            ZIndex: =6

                            Title3_9 As label:
                                Height: =49
                                OnSelect: =Select(Parent)
                                PaddingBottom: =0
                                PaddingLeft: =0
                                PaddingRight: =0
                                PaddingTop: =0
                                Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                VerticalAlign: =VerticalAlign.Top
                                Width: =268
                                X: =102
                                Y: =22
                                ZIndex: =1

                            Subtitle2_9 As label:
                                Height: =74
                                OnSelect: =Select(Parent)
                                PaddingBottom: =10
                                PaddingLeft: =1
                                PaddingRight: =0
                                PaddingTop: =0
                                Size: =15
                                Text: =ThisItem.title
                                VerticalAlign: =VerticalAlign.Top
                                Width: =799
                                X: =70
                                Y: =71
                                ZIndex: =2

                            Label1_16 As label:
                                Height: =34
                                OnSelect: =Select(Parent)
                                Text: =ThisItem.lastUpdated
                                Width: =263
                                X: =356
                                Y: =22
                                ZIndex: =3

                            Button11_14 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: |-
                                    =Set(editMessage, true);
                                    Set(addMessage, false);
                                    Set(editableRec, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Edit"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =62
                                X: =93
                                Y: =145
                                ZIndex: =4

                            Button11_15 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: =Remove(Comments_1, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Delete"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =105
                                X: =159
                                Y: =145
                                ZIndex: =5

                            Image7_12 As image:
                                Height: =76
                                Image: |-
                                    =
                                    "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                Width: =91
                                X: =4
                                Y: =8
                                ZIndex: =6

                            Circle3_9 As circle:
                                BorderThickness: =2
                                Fill: =Color.Transparent
                                Height: =95
                                Width: =93
                                X: =2
                                ZIndex: =7

                        Description_value_4 As text:
                            BorderColor: =RGBA(0, 0, 0, 1)
                            Default: =ticketInfo.Description & " There once was a ship that put to sea The name of the ship was the Billy O' Tea The winds blew up, her bow dipped down Oh blow, my bully boys, blow (huh) Soon may the Wellerman come To bring us sugar and tea and rum One day, when the tonguing is done We'll take our leave and go"
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =88
                            HoverBorderColor: =RGBA(237, 237, 237, 1)
                            HoverColor: =RGBA(237, 237, 237, 1)
                            HoverFill: =RGBA(237, 237, 237, 1)
                            Mode: =TextMode.MultiLine
                            Size: =16
                            Visible: =false
                            Width: =752
                            X: =146
                            Y: =143
                            ZIndex: =7

                        Label18_3 As label:
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =88
                            Size: =16
                            Text: ="Lorem ipsum dolor sit amet. Sed placeat dolorem qui porro nobis qui laudantium beatae a mollitia obcaecati quo magni corrupti aut nostrum vitae nam esse similique! Aut aspernatur porro hic molestias nostrum et temporibus ullam ut debitis rerum ut explicabo similique rem aperiam dolorem qui totam rerum." //Ex aspernatur quod ut dolorem perspiciatis et accusantium rerum ab magni numquam ut nihil harum. Aut rerum eveniet est autem quam sit ducimus rerum qui eveniet perspiciatis. Ea voluptas quos in facilis aliquid qui corporis quasi sit laboriosam odit in dolores dolor. Cum possimus sint qui excepturi quaerat est officiis sint ea odit voluptatem eos quam voluptas hic rerum consequatur sed deserunt laboriosam. Et quam numquam qui illo possimus et consequatur eligendi hic voluptatum debitis quo veniam excepturi ut dolores ducimus. Id galisum dolorem eos doloremque beatae aut veniam minus et magni molestiae aut repudiandae quia sed placeat aliquid qui quasi deleniti. Est consequatur tenetur est consequuntur accusamus ad quia praesentium sit consectetur illo non possimus rerum in velit doloribus. Ut internos explicabo et magnam provident ut earum pariatur a eaque deserunt et assumenda Quis. At distinctio atque et quae dolor est repellat officia a aliquam quod."
                            Visible: =false
                            Width: =752
                            X: =159
                            Y: =143
                            ZIndex: =8

                        Description_label_6 As label:
                            Align: =Align.Center
                            Font: =Font.Georgia
                            Height: =56
                            Size: =16
                            Text: |-
                                ="Description:"
                            Visible: =false
                            Width: =127
                            X: =32
                            Y: =130
                            ZIndex: =9

                        AttachmentControl_6 As attachments:
                            BorderColor: =Color.Black
                            BorderThickness: =5
                            DisabledBorderColor: =RGBA(0, 0, 0, 1)
                            DisplayMode: =DisplayMode.View
                            Fill: =RGBA(192, 192, 192, 0.5)
                            Font: =Font.Georgia
                            Height: =42
                            IsInDataCard: =true
                            Items: =
                            MaxAttachments: =10
                            PaddingBottom: =5
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            PaddingRight: =5
                            PaddingTop: =5
                            Visible: =false //If(IsEmpty(AttachmentControl_1.Attachments), false, true)
                            Width: =249
                            X: =32
                            Y: =70
                            ZIndex: =11

                        Title_label_6 As label:
                            Font: =Font.Georgia
                            Height: =70
                            Size: =24
                            Text: =title
                            Visible: =false
                            Width: =444
                            X: =32
                            ZIndex: =12

                Title_Container As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: |-
                        =//200
                        Parent.Height
                        //Parent.Height
                    LayoutMinHeight: =150
                    LayoutMinWidth: =250
                    Visible: =false
                    Width: =Parent.Width
                    ZIndex: =3

                    Container9_3 As groupContainer.verticalAutoLayoutContainer:
                        Height: =Parent.Height
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMode: =LayoutMode.Auto
                        PaddingLeft: =5
                        PaddingRight: =10
                        PaddingTop: =40
                        Width: =Parent.Width
                        ZIndex: =14

                        Label21_4 As label:
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="Attachments"
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), false, true)
                            Width: =Parent.Width
                            ZIndex: =1

                        Label25_3 As label:
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="No Attachments Found."
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), true, false)
                            Width: |
                                =300
                            ZIndex: =2

                        Gallery5_3 As gallery.variableTemplateHeightGallery:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderThickness: =1
                            DelayItemLoading: =true
                            FillPortions: =0
                            Height: =If('Single Ticket Info'.Size>1, 100, 25)
                            Items: |-
                                =//Filter('Ticket Attachments', ticketID=ticket)
                                Filter(
                                    'Ticket Attachments',
                                    ticketID = ticketInfo.ID
                                )
                            Layout: =Layout.Vertical
                            LayoutMinHeight: =287
                            LayoutMinWidth: =100
                            LoadingSpinner: =LoadingSpinner.Data
                            TemplateSize: =25
                            Visible: |-
                                =//If(IsEmpty(Filter('Ticket Attachments', ticketID=ticket)), false, true)
                                If(
                                    IsEmpty(
                                        Filter(
                                            'Ticket Attachments',
                                            ticketID = ticketInfo.ID
                                        )
                                    ),
                                    false,
                                    true
                                )
                            Width: =Parent.Width*.97
                            X: =96
                            Y: =157
                            ZIndex: =3

                            HtmlText3_3 As htmlViewer:
                                AutoHeight: =true
                                Height: =25
                                HtmlText: ="<a href='" & ThisItem.'Link to item' & "'>" & ThisItem.'File name with extension' & "</a>" 
                                OnSelect: =Select(Parent)
                                Size: =10
                                Width: =Parent.TemplateWidth
                                ZIndex: =1

                        Description_label_7 As label:
                            Font: =Font.Georgia
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size=1,10,16)
                            Text: |-
                                ="Description:"
                            Width: =Parent.Width
                            X: =40
                            Y: =40
                            ZIndex: =4

                        Description_value_7 As label:
                            AlignInContainer: =AlignInContainer.Start
                            AutoHeight: =true
                            DisplayMode: =DisplayMode.View
                            FillPortions: =1
                            Font: =Font.Georgia
                            Height: =100
                            LayoutMinHeight: =100
                            Overflow: =Overflow.Scroll
                            Size: =If('Single Ticket Info'.Size<2,10,16)
                            Text: =ticketInfo.Description
                            Width: =Parent.Width
                            X: =127
                            Y: =11
                            ZIndex: =5

                    Title_label_8 As label:
                        Font: =Font.Georgia
                        Size: =If('Single Ticket Info'.Size=1,12,24)
                        Text: =ticketInfo.Title
                        Width: =Parent.Width
                        Y: =10
                        ZIndex: =15

                Details As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: |-
                        =Parent.Height
                        //(Parent.Height/2-SingleTicketInfoHeader1.Height-SingleTicketInfoHeader2.Height)
                    LayoutMinHeight: =425
                    LayoutMinWidth: =250
                    PaddingBottom: =5
                    PaddingLeft: =5
                    PaddingRight: =5
                    PaddingTop: =5
                    Visible: =false
                    Width: =Parent.Width
                    ZIndex: =4

                    Rectangle_behind_details_3 As rectangle:
                        BorderThickness: =3
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =382
                        Visible: |-
                            =
                            true
                        Width: =378
                        X: =(Parent.Width-Self.Width)/2
                        Y: =(Parent.Height-Self.Height)/2
                        ZIndex: =1

                    Image_behind_Details_label_3 As image:
                        Height: =220
                        Image: ='image (2)'
                        Visible: =false
                        Width: =375
                        X: =31
                        Y: =81
                        ZIndex: =2

                    Details_label_3 As label:
                        Align: =Align.Center
                        Color: =RGBA(255, 255, 255, 1)
                        Fill: =ColorScheme.primary
                        Font: =Font.Georgia
                        Height: =30
                        Size: =16
                        Text: ="Details"
                        Width: =378
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y
                        ZIndex: =3

                    TextInput1_7 As text:
                        BorderThickness: =3
                        Default: =//Search(If(filterStatus.Selected.Result = "All", CurrentTicketInfo, Filter(CurrentTicketInfo, status = filterStatus.Selected.Result)), searchTicketQuery, "title", "description")
                        DisplayMode: =DisplayMode.View
                        Height: =344
                        Mode: =TextMode.MultiLine
                        Visible: |
                            =false
                        Width: =396
                        X: =(Parent.Width-Self.Width)/2
                        Y: =142
                        ZIndex: =4

                    Tags_Label_2 As label:
                        Font: =Font.Georgia
                        Height: =37
                        PaddingLeft: =10
                        Size: =12
                        Text: |-
                            ="Tags:"
                        Width: =127
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y + 261
                        ZIndex: =6

                    ComboBox1_3 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: |
                            =//If(tags = "", Blank(), Filter(Tags, name in tags))
                            If(ticketInfo.Tags = "", Blank(), Filter(Tags_1, name in ticketInfo.Tags))
                        DisplayFields: =["ComplianceAssetId"]
                        Height: =32
                        IsSearchable: =false
                        Items: =Tags_1
                        SearchFields: =["ComplianceAssetId"]
                        SearchItems: =[]
                        Width: =180
                        X: =Rectangle_behind_details_3.X+142
                        Y: =Rectangle_behind_details_3.Y + 261
                        ZIndex: =7

                    Save_Button_2 As button:
                        Fill: =ColorScheme.primary
                        Height: =30
                        OnSelect: |-
                            =/*If(AssigneeId_2.Text = "0",
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticket
                                    ),
                                    {tags: Label4_3.Text},
                                    {assignedTO: 0}
                                ),
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticket
                                    ),
                                    {tags: Label4_3.Text},
                                    {assignedTO: Value(AssigneeId_2.Text)},
                                    {addAssignees: Additional_Assign_Value_Label_2.Text}
                                    )
                            );
                            
                            
                            //Patch(Tickets_1,ticketRec, {addAssignees: Label4_1.Text});
                            Refresh(Tickets_1)*/
                            
                            // sql
                            /*
                            If(AssigneeId.Text = "0",
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: 0}
                                ),
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: Value(AssigneeId.Text)},
                                    {addAssignees: Additional_Assign_Value_Label.Text}
                                    )
                            );*/
                            // sharepoint
                            Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Label4_1.Text},
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId),
                                        Blank(),
                                        Value(AssigneeId.Text)
                                    )
                                },
                                {addAssignees: Additional_Assign_Value_Label.Text}
                            );
                            Refresh(Tickets)
                        Text: ="Save"
                        Width: =120
                        X: |-
                            =(Parent.Width-Self.Width)/2
                            //(Rectangle_behind_details_2.Width-Self.Width)/2
                        Y: |-
                            =//(Rectangle_behind_details_2.Height-Self.Height)+80
                            Rectangle_behind_details_3.Y + 343
                        ZIndex: =8

                    Label4_3 As label:
                        Height: =0
                        Text: =Concat(ComboBox1_3.SelectedItems, Concatenate(name, ","))
                        Visible: =false
                        Width: =0
                        X: =40
                        Y: =40
                        ZIndex: =9

                    Created_Date_Stamp_Label_2 As label:
                        Align: =Align.Center
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =37
                        Size: =12
                        Text: =ticketInfo.DateCreated
                        Width: =180
                        X: =Rectangle_behind_details_3.X+142
                        Y: =Rectangle_behind_details_3.Y + 301
                        ZIndex: =10

                    Created_Label_2 As label:
                        Font: =Font.Georgia
                        Height: =37
                        PaddingLeft: =10
                        Size: =12
                        Text: |-
                            ="Created:"
                        Width: =127
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y + 303
                        ZIndex: =11

                    Status_Value_Label_2 As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =37
                        Size: =12
                        Text: =status
                        Width: =180
                        X: =Rectangle_behind_details_3.X+142
                        Y: =Rectangle_behind_details_3.Y + 177
                        ZIndex: =12

                    Status_Label_2 As label:
                        Font: =Font.Georgia
                        Height: =37
                        PaddingLeft: =10
                        Size: =12
                        Text: |-
                            ="Status:"
                        Width: =127
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y + 177
                        ZIndex: =13

                    Assignee_ComboBox_2 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        Default: |
                            =
                        DefaultSelectedItems: |-
                            =//If(IsBlank(assigneeId), Blank(), Filter(Users,id = assigneeId))
                            If(IsBlank(ticketInfo.AssignedTo), Blank(), Filter(Users_1,ID = ticketInfo.AssignedTo))
                        DisplayFields: =["ComplianceAssetId"]
                        Height: =32
                        InputTextPlaceholder: ="Unassigned"
                        IsSearchable: =false
                        Items: |-
                            =//Filter(Users, userRole = "tech" || userRole = "admin")
                            //Users
                            Filter(Users_1, userRole = "tech" || userRole = "admin")
                        NoSelectionText: ="Unassigned"
                        SearchFields: =["ComplianceAssetId"]
                        SearchItems: =[]
                        SelectMultiple: =false
                        Size: =12
                        Visible: |
                            =true
                        Width: =180
                        X: =Rectangle_behind_details_3.X+142
                        Y: |-
                            =//Reporter_Label_1.Y+Reporter_Label_1.Height+5
                            Rectangle_behind_details_3.Y + 72
                        ZIndex: =14

                    Assignee_Value_Label_2 As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =58
                        Size: =16
                        Text: =Concat(Assignee_ComboBox_2.SelectedItems, Concatenate(fullName, ""))
                        Visible: |
                            =false
                        Width: =200
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Assignee_Label_2.Y 
                        ZIndex: =15

                    Assignee_Label_2 As label:
                        Font: =Font.Georgia
                        Height: =37
                        PaddingLeft: =10
                        Size: =12
                        Text: |-
                            ="Assignee:"
                        Width: =127
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y + 72
                        ZIndex: =16

                    AssigneeId_2 As label:
                        Text: |-
                            =//Concat(Assignee_ComboBox.SelectedItems, id)
                            If(CountRows(Assignee_ComboBox_2.SelectedItems) = 0, "0",Concat(Assignee_ComboBox_2.SelectedItems, id) )
                        Visible: =false
                        X: =299
                        Y: =80
                        ZIndex: =17

                    AssignMe_2 As label:
                        Align: =Align.Center
                        Height: =24
                        HoverColor: =ColorScheme.primary
                        OnSelect: |+
                            =UpdateContext({assigneeId:userData.id})
                            
                        Size: =12
                        Text: ="Assign to me"
                        Underline: =
                        Visible: =false//If(Value(AssigneeId_1.Text) = userData.id,false, true)
                        Width: =250
                        X: =269
                        Y: =216
                        ZIndex: =18

                    Category_Value_Label_2 As label:
                        Align: =Align.Center
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =37
                        Size: =12
                        Text: =LookUp(Category_1, ID = ticketInfo.MainCategory, name)
                        Width: =180
                        X: =Rectangle_behind_details_3.X+142
                        Y: =Rectangle_behind_details_3.Y + 219
                        ZIndex: =19

                    Category_Label_2 As label:
                        Font: =Font.Georgia
                        Height: =37
                        PaddingLeft: =10
                        Size: =12
                        Text: |-
                            ="Category:"
                        Width: =127
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y + 219
                        ZIndex: =20

                    Reporter_Value_Label_2 As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =37
                        Size: =12
                        Text: =LookUp(Users_1, ID = ticketInfo.CreatorId, fullName)
                        Width: =180
                        X: =Rectangle_behind_details_3.X+142
                        Y: =Rectangle_behind_details_3.Y + 30
                        ZIndex: =21

                    Reporter_Label_2 As label:
                        Font: =Font.Georgia
                        Height: =37
                        PaddingLeft: =10
                        Size: =12
                        Text: |-
                            ="Reporter:"
                        Width: =127
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y + 30
                        ZIndex: =22

                    Additonal_Assign_Label_2 As label:
                        Font: =Font.Georgia
                        Height: =62
                        PaddingLeft: =10
                        Size: =12
                        Text: |-
                            ="Additional Assignees:"
                        Width: =127
                        X: =Rectangle_behind_details_3.X
                        Y: =Rectangle_behind_details_3.Y + 114
                        ZIndex: =23

                    Additional_Assign_ComboBox_2 As combobox:
                        DefaultSelectedItems: |-
                            =//If(addAssignees = "", Blank(), Filter(Users, fullName in addAssignees))
                            If(ticketInfo.AddAssignees = "", Blank(), Filter(Users_1, fullName in ticketInfo.AddAssignees))
                        DisplayFields: =["ComplianceAssetId"]
                        Height: =32
                        IsSearchable: =false
                        Items: =Filter(Users_1, (userRole = "admin" || userRole = "tech") && fullName <> Assignee_Value_Label_2.Text)
                        SearchFields: =["ComplianceAssetId"]
                        SearchItems: =[]
                        Width: =180
                        X: =Rectangle_behind_details_3.X+142
                        Y: =Rectangle_behind_details_3.Y + 132
                        ZIndex: =24

                    Additional_Assign_Value_Label_2 As label:
                        Text: =Concat(Additional_Assign_ComboBox_2.SelectedItems, Concatenate(fullName, ","))
                        Visible: =false
                        X: =60
                        Y: =60
                        ZIndex: =25

                Comments_MobileView_new As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: |-
                        = //200
                        //Parent.Height-SingleTicketInfoHeader1.Height-SingleTicketInfoHeader2.Height
                        Parent.Height
                    LayoutMinHeight: =768
                    LayoutMinWidth: =250
                    Visible: =false
                    Width: =Parent.Width
                    ZIndex: =5

                    Container9_1 As groupContainer.verticalAutoLayoutContainer:
                        Height: =Parent.Height
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMode: =LayoutMode.Auto
                        PaddingLeft: =5
                        PaddingRight: =10
                        PaddingTop: =40
                        Width: =Parent.Width
                        ZIndex: =14

                        Gallery5_1 As gallery.variableTemplateHeightGallery:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderThickness: =1
                            DelayItemLoading: =true
                            FillPortions: =0
                            Height: =If('Single Ticket Info'.Size>1, 100, 25)
                            Items: |-
                                =Filter(
                                    'Ticket Attachments',
                                    ticketID = ticketInfo.ID
                                )
                            Layout: =Layout.Vertical
                            LayoutMinHeight: =287
                            LayoutMinWidth: =100
                            LoadingSpinner: =LoadingSpinner.Data
                            TemplateSize: =25
                            Visible: |-
                                =If(
                                    IsEmpty(
                                        Filter(
                                            'Ticket Attachments',
                                            ticketID = ticketInfo.ID
                                        )
                                    ),
                                    false,
                                    true
                                )
                            Width: =Parent.Width*.97
                            X: =96
                            Y: =157
                            ZIndex: =3

                            HtmlText3_1 As htmlViewer:
                                AutoHeight: =true
                                Height: =25
                                HtmlText: ="<a href='" & ThisItem.'Link to item' & "'>" & ThisItem.'File name with extension' & "</a>" 
                                OnSelect: =Select(Parent)
                                Size: =10
                                Width: =Parent.TemplateWidth
                                ZIndex: =1

                        Label_above_comments_3 As label:
                            Align: =Align.Center
                            AlignInContainer: =AlignInContainer.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size<2,10,20)
                            Text: ="Comments"
                            Width: =Parent.Width
                            X: =60
                            Y: =60
                            ZIndex: =6

                        Container18_5 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Height: =Parent.Height/2
                            LayoutMinHeight: =200
                            LayoutMinWidth: =250
                            Width: =Parent.Width
                            ZIndex: =7

                            TextInput2_5 As text:
                                Default: =
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel_1.X
                                Y: =Gallery2_6.Height
                                ZIndex: =2

                            TextInput9_5 As text:
                                Default: =If(editMessage, Gallery2_6.Selected.message, Blank())
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel_1.X
                                Y: =Gallery2_6.Height
                                ZIndex: =3

                            Button1_6 As button:
                                Fill: =ColorScheme.primary
                                Height: =30
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput2_5.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput2_5);
                                        If(
                                            userData.role = "admin" || userData.role = "tech",
                                            Office365Outlook.SendEmailV2(
                                                LookUp(
                                                    Users_1,
                                                    ID = ticketInfo.CreatorId,
                                                    email
                                                ),
                                                Concatenate(
                                                    "Update on Ticket # ",
                                                    ticketInfo.ID
                                                ),
                                                Concatenate(
                                                    "A comment has been added by ",
                                                    userData.firstName
                                                ),
                                                {
                                                    Cc: Concat(
                                                        Additional_Assign_ComboBox.SelectedItems,
                                                        email,
                                                        ";"
                                                    )
                                                }
                                            );
                                        )
                                    );
                                Size: =12
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =200
                                X: =TextInput2_5.X
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =4

                            Close_Ticket_Button_5 As button:
                                Fill: =ColorScheme.primary
                                Height: =30
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Size: =12
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                Visible: =If(LookUp(Tickets,ID = ticketInfo.ID, status) = "open", true, false)
                                X: =Button1_6.X + Button1_6.Width+50
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =5

                            "Gallery2_6 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderColor: =RGBA(0, 0, 0, 1)
                                Default: =//Last(Filter(Comments, ticketId = ticket))
                                Height: =Parent.Height*.75
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                ShowScrollbar: =false
                                TabIndex: =1
                                TemplatePadding: =3
                                TemplateSize: =150
                                Width: =Parent.Width*.97
                                ZIndex: =6

                                CommentOwnerNameLabel_1 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth-DateAndTimeStamp_1.Width - InitialsCircle_1.Width
                                    X: =InitialsCircle_1.X+InitialsCircle_1.Width+5
                                    Y: =12
                                    ZIndex: =1

                                CommentContentLabel_1 As label:
                                    DisplayMode: =DisplayMode.View
                                    Height: =68
                                    OnSelect: =Select(Parent)
                                    Overflow: =Overflow.Scroll
                                    PaddingBottom: =10
                                    PaddingLeft: =10
                                    PaddingTop: =0
                                    Size: =If(CountRows(Filter(MatchAll(CommentContentLabel_1.Text, "\S*(\s|\n?)"), !IsBlank(FullMatch)))>=20, 10, 15)
                                    Text: =ThisItem.message
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth
                                    Y: =CommentOwnerNameLabel_1.Y+CommentOwnerNameLabel_1.Height+5
                                    ZIndex: =2

                                DateAndTimeStamp_1 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    Size: =15
                                    Text: =ThisItem.lastUpdated
                                    Width: =200
                                    X: =Parent.TemplateWidth-Self.Width
                                    Y: =CommentOwnerNameLabel_1.Y
                                    ZIndex: =3

                                InitialsImage_1 As image:
                                    Height: =32
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =32
                                    X: =InitialsCircle_1.X
                                    Y: =10
                                    ZIndex: =6

                                InitialsCircle_1 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =32
                                    Visible: =If(IsEmpty(Filter(Comments_1, ticketId = ticketInfo.ID)), false, true)
                                    Width: =32
                                    X: =10
                                    Y: =10
                                    ZIndex: =7

                        ContainerforCommentsOnly_1 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Visible: =false
                            ZIndex: =8

                            Close_Ticket_Button_6 As button:
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                X: =250
                                Y: =298
                                ZIndex: =1

                            Button1_7 As button:
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput2_7.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput2_7);
                                        
                                    );
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =200
                                X: =12
                                Y: =298
                                ZIndex: =2

                            TextInput2_6 As text:
                                Default: =
                                Height: =72
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =879
                                Y: =201
                                ZIndex: =3

                            TextInput9_6 As text:
                                Default: =If(editMessage, Gallery2_8.Selected.message, Blank())
                                Height: =72
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width - 100
                                Y: =199
                                ZIndex: =4

                            "Gallery2_7 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderStyle: =BorderStyle.None
                                Height: =186
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                TabIndex: =1
                                TemplateSize: =184
                                Width: =879
                                ZIndex: =5

                                Title3_4 As label:
                                    Height: =49
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =268
                                    X: =102
                                    Y: =22
                                    ZIndex: =1

                                Subtitle2_4 As label:
                                    Height: =74
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =10
                                    PaddingLeft: =1
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =ThisItem.title
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =776
                                    X: =93
                                    Y: =71
                                    ZIndex: =2

                                Label1_11 As label:
                                    Height: =34
                                    OnSelect: =Select(Parent)
                                    Text: =ThisItem.lastUpdated
                                    Width: =263
                                    X: =356
                                    Y: =22
                                    ZIndex: =3

                                Button11_8 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: |-
                                        =Set(editMessage, true);
                                        Set(addMessage, false);
                                        Set(editableRec, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Edit"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =62
                                    X: =93
                                    Y: =145
                                    ZIndex: =4

                                Button11_9 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: =Remove(Comments_1, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Delete"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =105
                                    X: =159
                                    Y: =145
                                    ZIndex: =5

                                Image7_7 As image:
                                    Height: =76
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =91
                                    X: =4
                                    Y: =8
                                    ZIndex: =6

                                Circle3_4 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =95
                                    Width: =93
                                    X: =2
                                    ZIndex: =7

                    Group1_1 As group:
                        Height: =5
                        Width: =5
                        X: =40
                        Y: =40
                        ZIndex: =16

                        Label_above_comments_1 As label:
                            Align: =Align.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =44
                            Size: =20
                            Text: ="Comments"
                            Visible: =false
                            Width: =302
                            X: =286
                            Y: =267
                            ZIndex: =1

                        TextInput2_7 As text:
                            Default: =
                            Height: =72
                            HintText: ="Add a comment..."
                            OnSelect: =
                            Visible: =false //addMessage
                            Width: =879
                            X: =21
                            Y: =496
                            ZIndex: =2

                        TextInput9_7 As text:
                            Default: =If(editMessage, Gallery2_8.Selected.message, Blank())
                            Height: =72
                            OnSelect: =editMessage
                            Visible: =false //editMessage
                            Width: =Parent.Width - 100
                            X: =32
                            Y: =467
                            ZIndex: =3

                        Button1_8 As button:
                            OnSelect: |
                                =If(
                                    addMessage,
                                    Patch(
                                        Comments_1,
                                        Defaults(Comments_1),
                                        {
                                            ticketId: ticketInfo.ID,
                                            message: TextInput2_7.Text,
                                            creatorId: userData.id
                                        }
                                    );
                                    Reset(TextInput2_7);
                                    
                                );
                            Text: |-
                                =If(
                                    addMessage,
                                    "Add Comment",
                                    If(
                                        editMessage,
                                        "Update Comment"
                                    )
                                )
                            Visible: =false
                            Width: =200
                            X: =32
                            Y: =578
                            ZIndex: =4

                        Close_Ticket_Button_7 As button:
                            OnSelect: |-
                                =If(
                                    addMessage,
                                    Set(
                                        varShowResPopup,
                                        true
                                    ),
                                    If(
                                        editMessage,
                                        Set(
                                            addMessage,
                                            true
                                        ) && Set(
                                            editMessage,
                                            false
                                        )
                                    )
                                )
                            Text: |-
                                =If(
                                    editMessage,
                                    "Cancel Update",
                                    If(
                                        addMessage,
                                        "Close Ticket"
                                    )
                                )
                            Visible: =false
                            X: =407
                            Y: =578
                            ZIndex: =5

                        "Gallery2_8 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                            AccessibleLabel: =
                            BorderStyle: =BorderStyle.None
                            Height: =185
                            Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                            Layout: =Layout.Vertical
                            TabIndex: =1
                            TemplateSize: =184
                            Visible: =false
                            Width: =879
                            X: =32
                            Y: =302
                            ZIndex: =6

                            Title3_5 As label:
                                Height: =49
                                OnSelect: =Select(Parent)
                                PaddingBottom: =0
                                PaddingLeft: =0
                                PaddingRight: =0
                                PaddingTop: =0
                                Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                VerticalAlign: =VerticalAlign.Top
                                Width: =268
                                X: =102
                                Y: =22
                                ZIndex: =1

                            Subtitle2_5 As label:
                                Height: =74
                                OnSelect: =Select(Parent)
                                PaddingBottom: =10
                                PaddingLeft: =1
                                PaddingRight: =0
                                PaddingTop: =0
                                Size: =15
                                Text: =ThisItem.title
                                VerticalAlign: =VerticalAlign.Top
                                Width: =799
                                X: =70
                                Y: =71
                                ZIndex: =2

                            Label1_14 As label:
                                Height: =34
                                OnSelect: =Select(Parent)
                                Text: =ThisItem.lastUpdated
                                Width: =263
                                X: =356
                                Y: =22
                                ZIndex: =3

                            Button11_10 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: |-
                                    =Set(editMessage, true);
                                    Set(addMessage, false);
                                    Set(editableRec, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Edit"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =62
                                X: =93
                                Y: =145
                                ZIndex: =4

                            Button11_11 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: =Remove(Comments_1, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Delete"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =105
                                X: =159
                                Y: =145
                                ZIndex: =5

                            Image7_8 As image:
                                Height: =76
                                Image: |-
                                    =
                                    "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                Width: =91
                                X: =4
                                Y: =8
                                ZIndex: =6

                            Circle3_5 As circle:
                                BorderThickness: =2
                                Fill: =Color.Transparent
                                Height: =95
                                Width: =93
                                X: =2
                                ZIndex: =7

                        Description_value_2 As text:
                            BorderColor: =RGBA(0, 0, 0, 1)
                            Default: =ticketInfo.Description & " There once was a ship that put to sea The name of the ship was the Billy O' Tea The winds blew up, her bow dipped down Oh blow, my bully boys, blow (huh) Soon may the Wellerman come To bring us sugar and tea and rum One day, when the tonguing is done We'll take our leave and go"
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =88
                            HoverBorderColor: =RGBA(237, 237, 237, 1)
                            HoverColor: =RGBA(237, 237, 237, 1)
                            HoverFill: =RGBA(237, 237, 237, 1)
                            Mode: =TextMode.MultiLine
                            Size: =16
                            Visible: =false
                            Width: =752
                            X: =146
                            Y: =143
                            ZIndex: =7

                        Label18_1 As label:
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =88
                            Size: =16
                            Text: ="Lorem ipsum dolor sit amet. Sed placeat dolorem qui porro nobis qui laudantium beatae a mollitia obcaecati quo magni corrupti aut nostrum vitae nam esse similique! Aut aspernatur porro hic molestias nostrum et temporibus ullam ut debitis rerum ut explicabo similique rem aperiam dolorem qui totam rerum." //Ex aspernatur quod ut dolorem perspiciatis et accusantium rerum ab magni numquam ut nihil harum. Aut rerum eveniet est autem quam sit ducimus rerum qui eveniet perspiciatis. Ea voluptas quos in facilis aliquid qui corporis quasi sit laboriosam odit in dolores dolor. Cum possimus sint qui excepturi quaerat est officiis sint ea odit voluptatem eos quam voluptas hic rerum consequatur sed deserunt laboriosam. Et quam numquam qui illo possimus et consequatur eligendi hic voluptatum debitis quo veniam excepturi ut dolores ducimus. Id galisum dolorem eos doloremque beatae aut veniam minus et magni molestiae aut repudiandae quia sed placeat aliquid qui quasi deleniti. Est consequatur tenetur est consequuntur accusamus ad quia praesentium sit consectetur illo non possimus rerum in velit doloribus. Ut internos explicabo et magnam provident ut earum pariatur a eaque deserunt et assumenda Quis. At distinctio atque et quae dolor est repellat officia a aliquam quod."
                            Visible: =false
                            Width: =752
                            X: =159
                            Y: =143
                            ZIndex: =8

                        Description_label_2 As label:
                            Align: =Align.Center
                            Font: =Font.Georgia
                            Height: =56
                            Size: =16
                            Text: |-
                                ="Description:"
                            Visible: =false
                            Width: =127
                            X: =32
                            Y: =130
                            ZIndex: =9

                        AttachmentControl_4 As attachments:
                            BorderColor: =Color.Black
                            BorderThickness: =5
                            DisabledBorderColor: =RGBA(0, 0, 0, 1)
                            DisplayMode: =DisplayMode.View
                            Fill: =RGBA(192, 192, 192, 0.5)
                            Font: =Font.Georgia
                            Height: =42
                            IsInDataCard: =true
                            Items: =
                            MaxAttachments: =10
                            PaddingBottom: =5
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            PaddingRight: =5
                            PaddingTop: =5
                            Visible: =false //If(IsEmpty(AttachmentControl_1.Attachments), false, true)
                            Width: =249
                            X: =32
                            Y: =70
                            ZIndex: =11

                        Title_label_4 As label:
                            Font: =Font.Georgia
                            Height: =70
                            Size: =24
                            Text: =title
                            Visible: =false
                            Width: =444
                            X: =32
                            ZIndex: =12

                Comments_MobileView_old As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: |
                        =Parent.Height
                        //200
                        //Parent.Height-SingleTicketInfoHeader1.Height-SingleTicketInfoHeader2.Height
                    LayoutMinHeight: =768
                    LayoutMinWidth: =250
                    Visible: =false
                    Width: =Parent.Width
                    ZIndex: =6

                    Container9_4 As groupContainer.verticalAutoLayoutContainer:
                        Height: =Parent.Height
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMode: =LayoutMode.Auto
                        PaddingLeft: =5
                        PaddingRight: =10
                        PaddingTop: =40
                        Width: =Parent.Width
                        ZIndex: =14

                        Label_above_comments_4 As label:
                            Align: =Align.Center
                            AlignInContainer: =AlignInContainer.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size<2,10,24)
                            Text: ="Comments"
                            Width: =Parent.Width
                            X: =60
                            Y: =60
                            ZIndex: =6

                        Container18_8 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Height: =Parent.Height/2
                            LayoutMinHeight: =200
                            LayoutMinWidth: =250
                            Width: =Parent.Width
                            ZIndex: =7

                            TextInput2_9 As text:
                                Default: =
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel_2.X
                                Y: =Gallery2_10.Height
                                ZIndex: =2

                            TextInput9_9 As text:
                                Default: =//If(editMessage, Gallery2_10.Selected.message, Blank())
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel_2.X
                                Y: =Gallery2_10.Height
                                ZIndex: =3

                            Button1_10 As button:
                                Fill: =ColorScheme.primary
                                Height: =30
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput2_9.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput2_9);
                                        If(
                                            userData.role = "admin" || userData.role = "tech",
                                            Office365Outlook.SendEmailV2(
                                                LookUp(
                                                    Users_1,
                                                    ID = ticketInfo.AssignedTo,
                                                    email
                                                ),
                                                Concatenate(
                                                    "Update on Ticket # ",
                                                    ticketInfo.ID
                                                ),
                                                Concatenate(
                                                    "A comment has been added by ",
                                                    userData.firstName
                                                ),
                                                {
                                                    Cc: Concat(
                                                        Additional_Assign_ComboBox.SelectedItems,
                                                        email,
                                                        ";"
                                                    )
                                                }
                                            );
                                        )
                                    );
                                    If(
                                        editMessage,
                                        Patch(
                                            Comments_1,
                                            LookUp(
                                                Comments_1,
                                                ID = editableRec.ID
                                            ),
                                            {
                                                message: TextInput9_9.Text,
                                                lastUpdated: Now()
                                            }
                                        );
                                        Set(
                                            editMessage,
                                            false
                                        );
                                        Set(
                                            addMessage,
                                            true
                                        );
                                        
                                    );
                                Size: =12
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =200
                                X: =TextInput2_9.X
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =4

                            Close_Ticket_Button_9 As button:
                                Fill: =ColorScheme.primary
                                Height: =30
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Size: =12
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                X: =Button1_10.X + Button1_10.Width+50
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =5

                            "Gallery2_10 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderColor: =RGBA(0, 0, 0, 1)
                                Default: =Last(Filter(Comments_1, ticketId = ticketInfo.ID))
                                Height: =Parent.Height*.75
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                ShowScrollbar: =false
                                TabIndex: =1
                                TemplatePadding: =3
                                TemplateSize: =150
                                Width: =Parent.Width*.97
                                ZIndex: =6

                                CommentOwnerNameLabel_2 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingTop: =0
                                    Size: =13
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth-DateAndTimeStamp_2.Width - InitialsCircle_2.Width
                                    X: =InitialsCircle_2.X+InitialsCircle_2.Width+5
                                    Y: =12
                                    ZIndex: =1

                                CommentContentLabel_2 As label:
                                    DisplayMode: =DisplayMode.View
                                    Height: =68
                                    OnSelect: =Select(Parent)
                                    Overflow: =Overflow.Scroll
                                    PaddingBottom: =10
                                    PaddingLeft: =10
                                    PaddingTop: =0
                                    Size: =If(CountRows(Filter(MatchAll(CommentContentLabel_2.Text, "\S*(\s|\n?)"), !IsBlank(FullMatch)))>=20, 10, 15)
                                    Text: =ThisItem.title
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth
                                    Y: =CommentOwnerNameLabel_2.Y+CommentOwnerNameLabel_2.Height+5
                                    ZIndex: =2

                                DateAndTimeStamp_2 As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    Text: =ThisItem.lastUpdated
                                    Width: =200
                                    X: =Parent.TemplateWidth-Self.Width
                                    Y: =CommentOwnerNameLabel_2.Y
                                    ZIndex: =3

                                Button11_18 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: |-
                                        =Set(editMessage, true);
                                        Set(addMessage, false);
                                        Set(editableRec, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Edit"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =105
                                    Y: =Parent.TemplateHeight-Self.Height-5
                                    ZIndex: =4

                                Button11_19 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: =Remove(Comments, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Delete"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =105
                                    X: =Button11_18.X+Button11_18.Width+5
                                    Y: =Parent.TemplateHeight-Self.Height-5
                                    ZIndex: =5

                                InitialsImage_2 As image:
                                    Height: =32
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ticketInfo.CreatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ticketInfo.CreatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =32
                                    X: =InitialsCircle_2.X
                                    Y: =10
                                    ZIndex: =6

                                InitialsCircle_2 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =32
                                    Width: =32
                                    X: =10
                                    Y: =10
                                    ZIndex: =7

                        ContainerforCommentsOnly_2 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Visible: =false
                            ZIndex: =8

                            Close_Ticket_Button_8 As button:
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                X: =250
                                Y: =298
                                ZIndex: =1

                            Button1_9 As button:
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput2_10.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput2_10);
                                        
                                    );
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =200
                                X: =12
                                Y: =298
                                ZIndex: =2

                            TextInput2_8 As text:
                                Default: =
                                Height: =72
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =879
                                Y: =201
                                ZIndex: =3

                            TextInput9_8 As text:
                                Default: =//If(editMessage, Gallery2_11.Selected.message, Blank())
                                Height: =72
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width - 100
                                Y: =199
                                ZIndex: =4

                            "Gallery2_9 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderStyle: =BorderStyle.None
                                Default: =//Last(Filter(Comments, ticketId = ticket))
                                Height: =186
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                TabIndex: =1
                                TemplateSize: =184
                                Width: =879
                                ZIndex: =5

                                Title3_6 As label:
                                    Height: =49
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =268
                                    X: =102
                                    Y: =22
                                    ZIndex: =1

                                Subtitle2_6 As label:
                                    Height: =74
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =10
                                    PaddingLeft: =1
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =ThisItem.title
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =776
                                    X: =93
                                    Y: =71
                                    ZIndex: =2

                                Label1_12 As label:
                                    Height: =34
                                    OnSelect: =Select(Parent)
                                    Text: =ThisItem.lastUpdated
                                    Width: =263
                                    X: =356
                                    Y: =22
                                    ZIndex: =3

                                Button11_16 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: |-
                                        =Set(editMessage, true);
                                        Set(addMessage, false);
                                        Set(editableRec, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Edit"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =62
                                    X: =93
                                    Y: =145
                                    ZIndex: =4

                                Button11_17 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: =Remove(Comments, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Delete"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =105
                                    X: =159
                                    Y: =145
                                    ZIndex: =5

                                Image7_9 As image:
                                    Height: =76
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =91
                                    X: =4
                                    Y: =8
                                    ZIndex: =6

                                Circle3_6 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =95
                                    Width: =93
                                    X: =2
                                    ZIndex: =7

                    Group1_2 As group:
                        Height: =5
                        Width: =5
                        X: =40
                        Y: =40
                        ZIndex: =16

                        Label_above_comments_5 As label:
                            Align: =Align.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =44
                            Size: =20
                            Text: ="Comments"
                            Visible: =false
                            Width: =302
                            X: =286
                            Y: =267
                            ZIndex: =1

                        TextInput2_10 As text:
                            Default: =
                            Height: =72
                            HintText: ="Add a comment..."
                            OnSelect: =
                            Visible: =false //addMessage
                            Width: =879
                            X: =21
                            Y: =496
                            ZIndex: =2

                        TextInput9_10 As text:
                            Default: =If(editMessage, Gallery2_11.Selected.message, Blank())
                            Height: =72
                            OnSelect: =editMessage
                            Visible: =false //editMessage
                            Width: =Parent.Width - 100
                            X: =32
                            Y: =467
                            ZIndex: =3

                        Button1_11 As button:
                            OnSelect: |
                                =If(
                                    addMessage,
                                    Patch(
                                        Comments_1,
                                        Defaults(Comments_1),
                                        {
                                            ticketId: ticketInfo.ID,
                                            message: TextInput2_10.Text,
                                            creatorId: userData.id
                                        }
                                    );
                                    Reset(TextInput2_10);
                                    
                                );
                            Text: |-
                                =If(
                                    addMessage,
                                    "Add Comment",
                                    If(
                                        editMessage,
                                        "Update Comment"
                                    )
                                )
                            Visible: =false
                            Width: =200
                            X: =32
                            Y: =578
                            ZIndex: =4

                        Close_Ticket_Button_10 As button:
                            OnSelect: |-
                                =If(
                                    addMessage,
                                    Set(
                                        varShowResPopup,
                                        true
                                    ),
                                    If(
                                        editMessage,
                                        Set(
                                            addMessage,
                                            true
                                        ) && Set(
                                            editMessage,
                                            false
                                        )
                                    )
                                )
                            Text: |-
                                =If(
                                    editMessage,
                                    "Cancel Update",
                                    If(
                                        addMessage,
                                        "Close Ticket"
                                    )
                                )
                            Visible: =false
                            X: =407
                            Y: =578
                            ZIndex: =5

                        "Gallery2_11 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                            AccessibleLabel: =
                            BorderStyle: =BorderStyle.None
                            Default: =Last(Filter(Comments_1, ticketId = ticketInfo.ID))
                            Height: =185
                            Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                            Layout: =Layout.Vertical
                            TabIndex: =1
                            TemplateSize: =184
                            Visible: =false
                            Width: =879
                            X: =32
                            Y: =302
                            ZIndex: =6

                            Title3_7 As label:
                                Height: =49
                                OnSelect: =Select(Parent)
                                PaddingBottom: =0
                                PaddingLeft: =0
                                PaddingRight: =0
                                PaddingTop: =0
                                Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                VerticalAlign: =VerticalAlign.Top
                                Width: =268
                                X: =102
                                Y: =22
                                ZIndex: =1

                            Subtitle2_7 As label:
                                Height: =74
                                OnSelect: =Select(Parent)
                                PaddingBottom: =10
                                PaddingLeft: =1
                                PaddingRight: =0
                                PaddingTop: =0
                                Size: =15
                                Text: =ThisItem.message
                                VerticalAlign: =VerticalAlign.Top
                                Width: =799
                                X: =70
                                Y: =71
                                ZIndex: =2

                            Label1_13 As label:
                                Height: =34
                                OnSelect: =Select(Parent)
                                Text: =ThisItem.lastUpdated
                                Width: =263
                                X: =356
                                Y: =22
                                ZIndex: =3

                            Button11_20 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: |-
                                    =Set(editMessage, true);
                                    Set(addMessage, false);
                                    Set(editableRec, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Edit"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =62
                                X: =93
                                Y: =145
                                ZIndex: =4

                            Button11_21 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: =Remove(Comments_1, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Delete"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =105
                                X: =159
                                Y: =145
                                ZIndex: =5

                            Image7_10 As image:
                                Height: =76
                                Image: |-
                                    =
                                    "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                Width: =91
                                X: =4
                                Y: =8
                                ZIndex: =6

                            Circle3_7 As circle:
                                BorderThickness: =2
                                Fill: =Color.Transparent
                                Height: =95
                                Width: =93
                                X: =2
                                ZIndex: =7

                        Description_value_3 As text:
                            BorderColor: =RGBA(0, 0, 0, 1)
                            Default: =ticketInfo.Description & " There once was a ship that put to sea The name of the ship was the Billy O' Tea The winds blew up, her bow dipped down Oh blow, my bully boys, blow (huh) Soon may the Wellerman come To bring us sugar and tea and rum One day, when the tonguing is done We'll take our leave and go"
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =88
                            HoverBorderColor: =RGBA(237, 237, 237, 1)
                            HoverColor: =RGBA(237, 237, 237, 1)
                            HoverFill: =RGBA(237, 237, 237, 1)
                            Mode: =TextMode.MultiLine
                            Size: =16
                            Visible: =false
                            Width: =752
                            X: =146
                            Y: =143
                            ZIndex: =7

                        Label18_2 As label:
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =88
                            Size: =16
                            Text: ="Lorem ipsum dolor sit amet. Sed placeat dolorem qui porro nobis qui laudantium beatae a mollitia obcaecati quo magni corrupti aut nostrum vitae nam esse similique! Aut aspernatur porro hic molestias nostrum et temporibus ullam ut debitis rerum ut explicabo similique rem aperiam dolorem qui totam rerum." //Ex aspernatur quod ut dolorem perspiciatis et accusantium rerum ab magni numquam ut nihil harum. Aut rerum eveniet est autem quam sit ducimus rerum qui eveniet perspiciatis. Ea voluptas quos in facilis aliquid qui corporis quasi sit laboriosam odit in dolores dolor. Cum possimus sint qui excepturi quaerat est officiis sint ea odit voluptatem eos quam voluptas hic rerum consequatur sed deserunt laboriosam. Et quam numquam qui illo possimus et consequatur eligendi hic voluptatum debitis quo veniam excepturi ut dolores ducimus. Id galisum dolorem eos doloremque beatae aut veniam minus et magni molestiae aut repudiandae quia sed placeat aliquid qui quasi deleniti. Est consequatur tenetur est consequuntur accusamus ad quia praesentium sit consectetur illo non possimus rerum in velit doloribus. Ut internos explicabo et magnam provident ut earum pariatur a eaque deserunt et assumenda Quis. At distinctio atque et quae dolor est repellat officia a aliquam quod."
                            Visible: =false
                            Width: =752
                            X: =159
                            Y: =143
                            ZIndex: =8

                        Description_label_3 As label:
                            Align: =Align.Center
                            Font: =Font.Georgia
                            Height: =56
                            Size: =16
                            Text: |-
                                ="Description:"
                            Visible: =false
                            Width: =127
                            X: =32
                            Y: =130
                            ZIndex: =9

                        AttachmentControl_5 As attachments:
                            BorderColor: =Color.Black
                            BorderThickness: =5
                            DisabledBorderColor: =RGBA(0, 0, 0, 1)
                            DisplayMode: =DisplayMode.View
                            Fill: =RGBA(192, 192, 192, 0.5)
                            Font: =Font.Georgia
                            Height: =42
                            IsInDataCard: =true
                            Items: =
                            MaxAttachments: =10
                            PaddingBottom: =5
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            PaddingRight: =5
                            PaddingTop: =5
                            Visible: =false //If(IsEmpty(AttachmentControl_1.Attachments), false, true)
                            Width: =249
                            X: =32
                            Y: =70
                            ZIndex: =11

                        Title_label_5 As label:
                            Font: =Font.Georgia
                            Height: =70
                            Size: =24
                            Text: =title
                            Visible: =false
                            Width: =444
                            X: =32
                            ZIndex: =12

            SingleticketInfoActivityHistoryContainer_2 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =Parent.Height+100
                LayoutMinHeight: =Parent.Height
                LayoutMinWidth: =100
                LayoutMode: =LayoutMode.Auto
                LayoutOverflowY: =LayoutOverflow.Scroll
                Visible: ='Single Ticket Info'.Size>1
                Width: =If('Single Ticket Info'.Size>1, 2*(Parent.Width)/3, Parent.Width)
                ZIndex: =2

                Container18_2 As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    FillPortions: =0
                    Height: |-
                        = //200
                        Parent.Height
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =2

                    Container9 As groupContainer.verticalAutoLayoutContainer:
                        Height: =Parent.Height
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMode: =LayoutMode.Auto
                        PaddingLeft: =20
                        PaddingRight: =10
                        PaddingTop: =50
                        Width: =Parent.Width
                        ZIndex: =14

                        Description_label_4 As label:
                            Font: =Font.Georgia
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size=1,10,20)
                            Text: ="Description"
                            Visible: =false
                            Width: =Parent.Width
                            X: =40
                            Y: =40
                            ZIndex: =1

                        Label18_4 As label:
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =180
                            LayoutMinHeight: =100
                            Overflow: =Overflow.Scroll
                            Size: =If('Single Ticket Info'.Size<2,10,16)
                            Text: |-
                                =//ticketInfo.Description
                                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Neque viverra justo nec ultrices. In nulla posuere sollicitudin aliquam. Et netus et malesuada fames ac. Pharetra magna ac placerat vestibulum lectus. Sem integer vitae justo eget magna fermentum iaculis eu non. Ac placerat vestibulum lectus mauris. Mattis nunc sed blandit libero volutpat sed cras ornare arcu. Massa ultricies mi quis hendrerit dolor. Nibh nisl condimentum id venenatis a condimentum vitae sapien pellentesque."
                            Width: =Parent.Width-20
                            X: =127
                            Y: =11
                            ZIndex: =2

                        Label21 As label:
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="Attachments"
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), false, true)
                            Width: =Parent.Width
                            ZIndex: =3

                        Label25 As label:
                            Height: =If('Single Ticket Info'.Size<3, 20, 40)
                            Size: =If('Single Ticket Info'.Size>1,13, 8)
                            Text: ="No Attachments Found."
                            Visible: =If(IsEmpty(Filter('Ticket Attachments', ticketID=ticketInfo.ID)), true, false)
                            Width: |
                                =300
                            ZIndex: =4

                        Gallery5 As gallery.variableTemplateHeightGallery:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderThickness: =1
                            DelayItemLoading: =true
                            FillPortions: =0
                            Height: =If('Single Ticket Info'.Size>1, 50, 30)
                            Items: |-
                                =Filter(
                                    'Ticket Attachments',
                                    ticketID = ticketInfo.ID
                                )
                            Layout: =Layout.Vertical
                            LayoutMinHeight: =287
                            LayoutMinWidth: =100
                            LoadingSpinner: =LoadingSpinner.Data
                            TemplateSize: =25
                            Visible: |-
                                =If(
                                    IsEmpty(
                                        Filter(
                                            'Ticket Attachments',
                                            ticketID = ticketInfo.ID
                                        )
                                    ),
                                    false,
                                    true
                                )
                            Width: =Parent.Width*.95
                            X: =96
                            Y: =157
                            ZIndex: =5

                            HtmlText3 As htmlViewer:
                                AutoHeight: =true
                                Height: =25
                                HtmlText: ="<a href='" & ThisItem.'Link to item' & "'>" & ThisItem.'File name with extension' & "</a>" 
                                OnSelect: =Select(Parent)
                                Size: =10
                                Width: =Parent.TemplateWidth
                                ZIndex: =1

                        Label_above_comments_2 As label:
                            AlignInContainer: =AlignInContainer.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =If('Single Ticket Info'.Size<3, 20, 30)
                            PaddingLeft: =20
                            Size: =If('Single Ticket Info'.Size<2,10,14)
                            Text: ="Comments"
                            Visible: =false
                            Width: =Parent.Width
                            X: =60
                            Y: =60
                            ZIndex: =6

                        Container18_3 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Height: =Parent.Height/2
                            LayoutMinHeight: =200
                            LayoutMinWidth: =250
                            Width: =Parent.Width
                            ZIndex: =7

                            TextInput2_4 As text:
                                Default: =
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel.X
                                Y: =Gallery2_5.Height
                                ZIndex: =2

                            TextInput9_4 As text:
                                Default: =If(editMessage, Gallery2_5.Selected.message, Blank())
                                Height: =If('Single Ticket Info'.Size=1,25, 36)
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width *.95
                                X: =CommentContentLabel.X
                                Y: =Gallery2_5.Height
                                ZIndex: =3

                            Button1_5 As button:
                                Fill: =ColorScheme.primary
                                Height: =30
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput2_4.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput2_4);
                                        If(
                                            userData.role = "admin" || userData.role = "tech",
                                            Office365Outlook.SendEmailV2(
                                                LookUp(
                                                    Users_1,
                                                    ID = ticketInfo.CreatorId,
                                                    email
                                                ),
                                                Concatenate(
                                                    "Update on Ticket # ",
                                                    ticketInfo.ID
                                                ),
                                                Concatenate(
                                                    "A comment has been added by ",
                                                    userData.firstName
                                                ),
                                                {
                                                    Cc: Concat(
                                                        Additional_Assign_ComboBox.SelectedItems,
                                                        email,
                                                        ";"
                                                    )
                                                }
                                            );
                                        )
                                    );
                                Size: =12
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =200
                                X: =TextInput2_4.X
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =4

                            Close_Ticket_Button_4 As button:
                                Fill: =RGBA(151, 0, 0, 1)
                                Height: =30
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Size: =12
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                Visible: =If(LookUp(Tickets,ID = ticketInfo.ID, status) = "open", If(userData.role = "staff",false,true), false)
                                X: =Button1_5.X + Button1_5.Width+50
                                Y: =Parent.Height-Self.Height-5
                                ZIndex: =5

                            "Gallery2_5 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderColor: =RGBA(0, 0, 0, 1)
                                Default: =//Last(Filter(Comments, ticketId = ticket))
                                Height: =Parent.Height*.75
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                ShowScrollbar: =false
                                TabIndex: =1
                                TemplatePadding: =3
                                TemplateSize: =150
                                Width: =Parent.Width*.95
                                ZIndex: =6

                                CommentOwnerNameLabel As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth-DateAndTimeStamp.Width - InitialsCircle.Width
                                    X: =InitialsCircle.X+InitialsCircle.Width+5
                                    Y: =12
                                    ZIndex: =1

                                CommentContentLabel As label:
                                    DisplayMode: =DisplayMode.View
                                    Height: =68
                                    OnSelect: =Select(Parent)
                                    Overflow: =Overflow.Scroll
                                    PaddingBottom: =10
                                    PaddingLeft: =10
                                    PaddingTop: =0
                                    Size: =If(CountRows(Filter(MatchAll(CommentContentLabel.Text, "\S*(\s|\n?)"), !IsBlank(FullMatch)))>=20, 10, 15)
                                    Text: =ThisItem.message
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =Parent.TemplateWidth
                                    Y: =CommentOwnerNameLabel.Y+CommentOwnerNameLabel.Height+5
                                    ZIndex: =2

                                DateAndTimeStamp As label:
                                    Height: =30
                                    OnSelect: =Select(Parent)
                                    Size: =15
                                    Text: =ThisItem.lastUpdated
                                    Width: =200
                                    X: =Parent.TemplateWidth-Self.Width
                                    Y: =CommentOwnerNameLabel.Y
                                    ZIndex: =3

                                InitialsImage As image:
                                    Height: =32
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =32
                                    X: =InitialsCircle.X
                                    Y: =10
                                    ZIndex: =6

                                InitialsCircle As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =32
                                    Visible: =If(IsEmpty(Filter(Comments_1, ticketId = ticketInfo.ID)), false, true)
                                    Width: =32
                                    X: =10
                                    Y: =10
                                    ZIndex: =7

                                Rectangle7 As rectangle:
                                    Fill: =ColorScheme.secondary
                                    Height: =6
                                    OnSelect: =Select(Parent)
                                    Width: =Parent.TemplateWidth
                                    Y: =Parent.TemplateHeight-Self.Height
                                    ZIndex: =8

                        ContainerforCommentsOnly As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Visible: =false
                            ZIndex: =8

                            Close_Ticket_Button_3 As button:
                                OnSelect: |-
                                    =If(
                                        addMessage,
                                        Set(
                                            varShowResPopup,
                                            true
                                        ),
                                        If(
                                            editMessage,
                                            Set(
                                                addMessage,
                                                true
                                            ) && Set(
                                                editMessage,
                                                false
                                            )
                                        )
                                    )
                                Text: |-
                                    =If(
                                        editMessage,
                                        "Cancel Update",
                                        If(
                                            addMessage,
                                            "Close Ticket"
                                        )
                                    )
                                X: =250
                                Y: =298
                                ZIndex: =1

                            Button1_4 As button:
                                OnSelect: |
                                    =If(
                                        addMessage,
                                        Patch(
                                            Comments_1,
                                            Defaults(Comments_1),
                                            {
                                                ticketId: ticketInfo.ID,
                                                message: TextInput2_2.Text,
                                                creatorId: userData.id
                                            }
                                        );
                                        Reset(TextInput2_2);
                                        
                                    );
                                Text: |-
                                    =If(
                                        addMessage,
                                        "Add Comment",
                                        If(
                                            editMessage,
                                            "Update Comment"
                                        )
                                    )
                                Width: =200
                                X: =12
                                Y: =298
                                ZIndex: =2

                            TextInput2_3 As text:
                                Default: =
                                Height: =72
                                HintText: ="Add a comment..."
                                OnSelect: =
                                Visible: =addMessage
                                Width: =879
                                Y: =201
                                ZIndex: =3

                            TextInput9_3 As text:
                                Default: =If(editMessage, Gallery2_3.Selected.message, Blank())
                                Height: =72
                                OnSelect: =editMessage
                                Visible: =editMessage
                                Width: =Parent.Width - 100
                                Y: =199
                                ZIndex: =4

                            "Gallery2_4 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                                AccessibleLabel: =
                                BorderStyle: =BorderStyle.None
                                Height: =186
                                Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                                Layout: =Layout.Vertical
                                TabIndex: =1
                                TemplateSize: =184
                                Width: =879
                                ZIndex: =5

                                Title3_3 As label:
                                    Height: =49
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =268
                                    X: =102
                                    Y: =22
                                    ZIndex: =1

                                Subtitle2_3 As label:
                                    Height: =74
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =10
                                    PaddingLeft: =1
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =15
                                    Text: =ThisItem.title
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =776
                                    X: =93
                                    Y: =71
                                    ZIndex: =2

                                Label1_7 As label:
                                    Height: =34
                                    OnSelect: =Select(Parent)
                                    Text: =ThisItem.lastUpdated
                                    Width: =263
                                    X: =356
                                    Y: =22
                                    ZIndex: =3

                                Button11_6 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: |-
                                        =Set(editMessage, true);
                                        Set(addMessage, false);
                                        Set(editableRec, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Edit"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =62
                                    X: =93
                                    Y: =145
                                    ZIndex: =4

                                Button11_7 As button:
                                    BorderStyle: =BorderStyle.None
                                    Color: =Color.DarkGray
                                    DisabledBorderColor: =
                                    DisabledColor: =
                                    Fill: =Color.Transparent
                                    Height: =30
                                    HoverBorderColor: =
                                    HoverColor: =Color.Gray
                                    HoverFill: =
                                    OnSelect: =Remove(Comments_1, ThisItem);
                                    PressedBorderColor: =
                                    PressedColor: =Color.Gray
                                    PressedFill: =
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Text: ="Delete"
                                    Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                    Width: =105
                                    X: =159
                                    Y: =145
                                    ZIndex: =5

                                Image7_6 As image:
                                    Height: =76
                                    Image: |-
                                        =
                                        "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                    Width: =91
                                    X: =4
                                    Y: =8
                                    ZIndex: =6

                                Circle3_3 As circle:
                                    BorderThickness: =2
                                    Fill: =Color.Transparent
                                    Height: =95
                                    Width: =93
                                    X: =2
                                    ZIndex: =7

                    Title_label_3 As label:
                        Font: =Font.Georgia
                        Height: =29
                        PaddingLeft: =20
                        Size: =If('Single Ticket Info'.Size=1,12,30)
                        Text: =ticketInfo.Title
                        Width: =Parent.Width
                        Y: =15
                        ZIndex: =15

                    Group1 As group:
                        Height: =5
                        Width: =5
                        X: =40
                        Y: =40
                        ZIndex: =16

                        Label_above_comments As label:
                            Align: =Align.Center
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =44
                            Size: =20
                            Text: ="Comments"
                            Visible: =false
                            Width: =302
                            X: =286
                            Y: =267
                            ZIndex: =1

                        TextInput2_2 As text:
                            Default: =
                            Height: =72
                            HintText: ="Add a comment..."
                            OnSelect: =
                            Visible: =false //addMessage
                            Width: =879
                            X: =21
                            Y: =496
                            ZIndex: =2

                        TextInput9_2 As text:
                            Default: =If(editMessage, Gallery2_3.Selected.message, Blank())
                            Height: =72
                            OnSelect: =editMessage
                            Visible: =false //editMessage
                            Width: =Parent.Width - 100
                            X: =32
                            Y: =467
                            ZIndex: =3

                        Button1_3 As button:
                            OnSelect: |
                                =If(
                                    addMessage,
                                    Patch(
                                        Comments_1,
                                        Defaults(Comments_1),
                                        {
                                            ticketId: ticketInfo.ID,
                                            message: TextInput2_2.Text,
                                            creatorId: userData.id
                                        }
                                    );
                                    Reset(TextInput2_2);
                                    
                                );
                            Text: |-
                                =If(
                                    addMessage,
                                    "Add Comment",
                                    If(
                                        editMessage,
                                        "Update Comment"
                                    )
                                )
                            Visible: =false
                            Width: =200
                            X: =32
                            Y: =578
                            ZIndex: =4

                        Close_Ticket_Button_2 As button:
                            OnSelect: |-
                                =If(
                                    addMessage,
                                    Set(
                                        varShowResPopup,
                                        true
                                    ),
                                    If(
                                        editMessage,
                                        Set(
                                            addMessage,
                                            true
                                        ) && Set(
                                            editMessage,
                                            false
                                        )
                                    )
                                )
                            Text: |-
                                =If(
                                    editMessage,
                                    "Cancel Update",
                                    If(
                                        addMessage,
                                        "Close Ticket"
                                    )
                                )
                            Visible: =false
                            X: =407
                            Y: =578
                            ZIndex: =5

                        "Gallery2_3 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                            AccessibleLabel: =
                            BorderStyle: =BorderStyle.None
                            Height: =185
                            Items: =Filter(Comments_1, ticketId = ticketInfo.ID)
                            Layout: =Layout.Vertical
                            TabIndex: =1
                            TemplateSize: =184
                            Visible: =false
                            Width: =879
                            X: =32
                            Y: =302
                            ZIndex: =6

                            Title3_2 As label:
                                Height: =49
                                OnSelect: =Select(Parent)
                                PaddingBottom: =0
                                PaddingLeft: =0
                                PaddingRight: =0
                                PaddingTop: =0
                                Text: =LookUp(Users_1, ID = ThisItem.creatorId, fullName)
                                VerticalAlign: =VerticalAlign.Top
                                Width: =268
                                X: =102
                                Y: =22
                                ZIndex: =1

                            Subtitle2_2 As label:
                                Height: =74
                                OnSelect: =Select(Parent)
                                PaddingBottom: =10
                                PaddingLeft: =1
                                PaddingRight: =0
                                PaddingTop: =0
                                Size: =15
                                Text: =ThisItem.title
                                VerticalAlign: =VerticalAlign.Top
                                Width: =799
                                X: =70
                                Y: =71
                                ZIndex: =2

                            Label1_6 As label:
                                Height: =34
                                OnSelect: =Select(Parent)
                                Text: =ThisItem.lastUpdated
                                Width: =263
                                X: =356
                                Y: =22
                                ZIndex: =3

                            Button11_4 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: |-
                                    =Set(editMessage, true);
                                    Set(addMessage, false);
                                    Set(editableRec, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Edit"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =62
                                X: =93
                                Y: =145
                                ZIndex: =4

                            Button11_5 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =Color.DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Color.Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Color.Gray
                                HoverFill: =
                                OnSelect: =Remove(Comments_1, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Color.Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Delete"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =105
                                X: =159
                                Y: =145
                                ZIndex: =5

                            Image7_5 As image:
                                Height: =76
                                Image: |-
                                    =
                                    "https://ui-avatars.com/api/?name=" & Left(LookUp(Users_1, ID = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users_1, ID = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                Width: =91
                                X: =4
                                Y: =8
                                ZIndex: =6

                            Circle3_2 As circle:
                                BorderThickness: =2
                                Fill: =Color.Transparent
                                Height: =95
                                Width: =93
                                X: =2
                                ZIndex: =7

                        Description_value_1 As text:
                            BorderColor: =RGBA(0, 0, 0, 1)
                            Default: =ticketInfo.Description & " There once was a ship that put to sea The name of the ship was the Billy O' Tea The winds blew up, her bow dipped down Oh blow, my bully boys, blow (huh) Soon may the Wellerman come To bring us sugar and tea and rum One day, when the tonguing is done We'll take our leave and go"
                            DisplayMode: =DisplayMode.View
                            Font: =Font.Georgia
                            Height: =88
                            HoverBorderColor: =RGBA(237, 237, 237, 1)
                            HoverColor: =RGBA(237, 237, 237, 1)
                            HoverFill: =RGBA(237, 237, 237, 1)
                            Mode: =TextMode.MultiLine
                            Size: =16
                            Visible: =false
                            Width: =752
                            X: =146
                            Y: =143
                            ZIndex: =7

                        Label18 As label:
                            AutoHeight: =true
                            Font: =Font.Georgia
                            Height: =88
                            Size: =16
                            Text: ="Lorem ipsum dolor sit amet. Sed placeat dolorem qui porro nobis qui laudantium beatae a mollitia obcaecati quo magni corrupti aut nostrum vitae nam esse similique! Aut aspernatur porro hic molestias nostrum et temporibus ullam ut debitis rerum ut explicabo similique rem aperiam dolorem qui totam rerum." //Ex aspernatur quod ut dolorem perspiciatis et accusantium rerum ab magni numquam ut nihil harum. Aut rerum eveniet est autem quam sit ducimus rerum qui eveniet perspiciatis. Ea voluptas quos in facilis aliquid qui corporis quasi sit laboriosam odit in dolores dolor. Cum possimus sint qui excepturi quaerat est officiis sint ea odit voluptatem eos quam voluptas hic rerum consequatur sed deserunt laboriosam. Et quam numquam qui illo possimus et consequatur eligendi hic voluptatum debitis quo veniam excepturi ut dolores ducimus. Id galisum dolorem eos doloremque beatae aut veniam minus et magni molestiae aut repudiandae quia sed placeat aliquid qui quasi deleniti. Est consequatur tenetur est consequuntur accusamus ad quia praesentium sit consectetur illo non possimus rerum in velit doloribus. Ut internos explicabo et magnam provident ut earum pariatur a eaque deserunt et assumenda Quis. At distinctio atque et quae dolor est repellat officia a aliquam quod."
                            Visible: =false
                            Width: =752
                            X: =159
                            Y: =143
                            ZIndex: =8

                        Description_label_1 As label:
                            Align: =Align.Center
                            Font: =Font.Georgia
                            Height: =56
                            Size: =16
                            Text: |-
                                ="Description:"
                            Visible: =false
                            Width: =127
                            X: =32
                            Y: =130
                            ZIndex: =9

                        AttachmentControl_2 As attachments:
                            BorderColor: =Color.Black
                            BorderThickness: =5
                            DisabledBorderColor: =RGBA(0, 0, 0, 1)
                            DisplayMode: =DisplayMode.View
                            Fill: =RGBA(192, 192, 192, 0.5)
                            Font: =Font.Georgia
                            Height: =42
                            IsInDataCard: =true
                            Items: =
                            MaxAttachments: =10
                            PaddingBottom: =5
                            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                            PaddingRight: =5
                            PaddingTop: =5
                            Visible: =false //If(IsEmpty(AttachmentControl_1.Attachments), false, true)
                            Width: =249
                            X: =32
                            Y: =70
                            ZIndex: =11

                        Title_label_2 As label:
                            Font: =Font.Georgia
                            Height: =70
                            Size: =24
                            Text: =title
                            Visible: =false
                            Width: =444
                            X: =32
                            ZIndex: =12

            SingleTicketInfoDetailsContainer_3 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.Start
                FillPortions: =0
                Height: =Parent.Height
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                Visible: ='Single Ticket Info'.Size>1
                Width: =If('Single Ticket Info'.Size>1,Parent.Width/3,Parent.Width)
                ZIndex: =3

                Container17_3 As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.Start
                    Height: =Parent.Height
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =Parent.Width
                    ZIndex: =1

                    Rectangle_behind_details_1 As rectangle:
                        BorderThickness: =3
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =If(userData.role = "staff",Parent.Height*.60 , Parent.Height*.90)
                        Visible: |-
                            =
                            true
                        Width: =Parent.Width*.90
                        X: =(Parent.Width-Self.Width)/2
                        Y: =(Parent.Height-Self.Height)/2
                        ZIndex: =1

                    Image_behind_Details_label_1 As image:
                        Height: =220
                        Image: ='image (2)'
                        Visible: =false
                        Width: =375
                        X: =31
                        Y: =81
                        ZIndex: =2

                    Details_label_1 As label:
                        Align: =Align.Center
                        Color: =RGBA(255, 255, 255, 1)
                        Fill: =ColorScheme.primary
                        Height: =38
                        Size: =24
                        Text: ="Details"
                        Width: =Parent.Width*.90
                        X: =Rectangle_behind_details_1.X
                        Y: =Rectangle_behind_details_1.Y
                        ZIndex: =3

                    TextInput1_5 As text:
                        BorderThickness: =3
                        Default: =//Search(If(filterStatus.Selected.Result = "All", CurrentTicketInfo, Filter(CurrentTicketInfo, status = filterStatus.Selected.Result)), searchTicketQuery, "title", "description")
                        DisplayMode: =DisplayMode.View
                        Height: =344
                        Mode: =TextMode.MultiLine
                        Visible: |
                            =false
                        Width: =396
                        X: =36
                        Y: =117
                        ZIndex: =4

                    Title_Label As label:
                        Height: =58
                        Text: =""
                        Width: =93
                        Y: =84
                        ZIndex: =5

                    Save_Button As button:
                        Fill: =ColorScheme.primary
                        OnSelect: |-
                            =// sql
                            /*
                            If(AssigneeId.Text = "0",
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: 0}
                                ),
                                Patch(
                                    Tickets_1,
                                    LookUp(
                                        Tickets_1,
                                        id = ticketInfo.ID
                                    ),
                                    {tags: Label4_1.Text},
                                    {assignedTO: Value(AssigneeId.Text)},
                                    {addAssignees: Additional_Assign_Value_Label.Text}
                                    )
                            );*/
                            // sharepoint
                            Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Label4_1.Text},
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId),
                                        Blank(),
                                        Value(AssigneeId.Text)
                                    )
                                },
                                {addAssignees: Additional_Assign_Value_Label.Text}
                            );
                            Refresh(Tickets)
                        Text: ="Save Changes"
                        Visible: =If(userData.role = "staff", false,true)
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Rectangle_behind_details_1.Height-Self.Height
                        ZIndex: =6

                    Label4_1 As label:
                        Height: =0
                        Text: =Concat(ComboBox1_1.SelectedItems, Concatenate(name, ","))
                        Visible: =false
                        Width: =0
                        X: =40
                        Y: =40
                        ZIndex: =7

                    Created_Date_Stamp_Label As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label.Size
                        Text: =ticketInfo.DateCreated
                        Width: =Reporter_Label.Width
                        X: =Created_Label.Width+Created_Label.X
                        Y: =Created_Label.Y
                        ZIndex: =8

                    Created_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Created"
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =If(Tags_Label.Visible,ComboBox1_1.Y+ComboBox1_1.Height+30, Category_Label.Y+Category_Label.Height+30)
                        ZIndex: =9

                    ComboBox1_1 As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.Tags = "", Blank(), Filter(Tags_1, name in ticketInfo.Tags))
                        DisplayFields: =["field_2"]
                        Height: =30
                        Items: =Tags_1
                        OnChange: |-
                            =/*Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {tags: Label4_1.Text}
                            );*/
                        SearchFields: =["field_2"]
                        SearchItems: =Search(Tags_1,ComboBox1_1.SearchText,"field_2")
                        Size: =Assignee_ComboBox.Size
                        Visible: =Tags_Label.Visible
                        Width: =Assignee_ComboBox.Width
                        X: =Assignee_ComboBox.X
                        Y: =Tags_Label.Y
                        ZIndex: =10

                    Tags_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Tags"
                        Visible: =If(userData.role = "staff", false,true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =Category_Value_Label.Y+Category_Value_Label.Height+30
                        ZIndex: =11

                    Category_Value_Label As label:
                        DisplayMode: =DisplayMode.View
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label.Size
                        Text: =LookUp(Category_1, ID = ticketInfo.MainCategory, name)
                        Width: =Reporter_Label.Width
                        X: =Category_Label.Width+Category_Label.X
                        Y: =Category_Label.Y
                        ZIndex: =12

                    Category_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Category"
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =Status_Value_Label.Y+Status_Value_Label.Height+30
                        ZIndex: =13

                    Status_Value_Label As label:
                        Font: =Font.Georgia
                        Height: =30
                        LineHeight: =1
                        Size: =Reporter_Label.Size
                        Text: =LookUp(Tickets,ID = ticketInfo.ID, status)
                        Width: =Reporter_Label.Width
                        X: =Status_Label.Width+Status_Label.X
                        Y: =Status_Label.Y
                        ZIndex: =14

                    Status_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Status"
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =If(Additonal_Assign_Label.Visible,If(AssignMe.Visible,AssignMe.Y+AssignMe.Height, Additonal_Assign_Label.Height+Additonal_Assign_Label.Y+30), Reporter_Label.Height+Reporter_Label.Y+30)
                        ZIndex: =15

                    Additional_Assign_ComboBox As combobox:
                        ChevronBackground: =ColorScheme.primary
                        DefaultSelectedItems: =If(ticketInfo.AddAssignees = "", Blank(), Filter(Users_1, fullName in ticketInfo.AddAssignees))
                        DisplayFields: =["field_4"]
                        Height: =30
                        IsSearchable: =false
                        Items: =Filter(Users_1, (userRole = "admin" || userRole = "tech") && fullName <> Assignee_Value_Label.Text)
                        OnChange: |-
                            =/*Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {addAssignees: Additional_Assign_Value_Label.Text}
                            );*/
                        SearchFields: =["field_4"]
                        SearchItems: =[]
                        Size: =Assignee_ComboBox.Size
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Assignee_ComboBox.Width
                        X: =Assignee_ComboBox.X
                        Y: =Additonal_Assign_Label.Y
                        ZIndex: =16

                    Additonal_Assign_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Other Assignees"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =Assignee_ComboBox.Height+Assignee_ComboBox.Y+30
                        ZIndex: =17

                    Assignee_ComboBox As combobox:
                        ChevronBackground: =ColorScheme.primary
                        Default: |
                            =
                        DefaultSelectedItems: |-
                            =//If(IsBlank(ticketInfo.AssignedTo), Blank(), Filter(Users_1,ID = ticketInfo.AssignedTo))
                            
                            If(
                               !IsBlank(
                                  primAssignee),
                                  primAssignee,
                                  LookUp(Users_1,ID = ticketInfo.AssignedTo)
                            )
                        DisplayFields: =["field_4"]
                        Height: =30
                        InputTextPlaceholder: ="Unassigned"
                        Items: =Filter(Users_1, userRole = "tech" || userRole = "admin")
                        NoSelectionText: ="Unassigned"
                        OnChange: |-
                            =/*Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: If(
                                        IsBlank(AssigneeId),
                                        Blank(),
                                        Value(AssigneeId.Text)
                                    )
                                }
                            );*/
                        SearchFields: =["field_4"]
                        SearchItems: =Search(Filter(Users_1, userRole = "tech" || userRole = "admin"),Assignee_ComboBox.SearchText,"field_4")
                        SelectMultiple: =false
                        Size: =If('Single Ticket Info'.Size>3,13, 10)
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Rectangle_behind_details_1.Width/2
                        X: =Assignee_Label.X+Assignee_Label.Width-10
                        Y: =Assignee_Label.Y
                        ZIndex: =18

                    Assignee_Value_Label As label:
                        Align: =Align.Center
                        Font: =Font.Georgia
                        Height: =30
                        Size: =16
                        Text: =Concat(Assignee_ComboBox.SelectedItems, Concatenate(fullName, ""))
                        Visible: =false
                        Width: =Rectangle_behind_details_1.Width
                        X: =(Parent.Width-Self.Width)/2
                        Y: =Assignee_Label.Y 
                        ZIndex: =19

                    Assignee_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =Reporter_Label.Size
                        Text: ="Assignee"
                        Visible: =If(userData.role = "staff",false,true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Label.X
                        Y: =Reporter_Value_Label.Y+Reporter_Value_Label.Height+30
                        ZIndex: =20

                    AssigneeId As label:
                        Height: =30
                        Text: |-
                            =//Concat(Assignee_ComboBox.SelectedItems, id)
                            If(CountRows(Assignee_ComboBox.SelectedItems) = 0, "0",Concat(Assignee_ComboBox.SelectedItems, ID) )
                        Visible: =false
                        X: =299
                        Y: =80
                        ZIndex: =21

                    AssignMe As label:
                        Height: =28
                        HoverColor: =ColorScheme.primary
                        OnSelect: |+
                            =UpdateContext({primAssignee: LookUp(Users_1, ID = userData.id)});
                            Reset(Assignee_ComboBox)
                            
                            //Reset(Assignee_ComboBox);
                            /* Patch(
                                Tickets,
                                LookUp(
                                    Tickets,
                                    ID = ticketInfo.ID
                                ),
                                {
                                    assignedTo: userData.id
                                }
                            );
                            */
                            
                        Size: =12
                        Text: ="Assign to me"
                        Underline: =
                        Visible: =If(Value(AssigneeId.Text) = userData.id || userData.role="staff",false, true)
                        Width: =Reporter_Label.Width
                        X: =Reporter_Value_Label.X
                        Y: =Additional_Assign_ComboBox.Y+Additional_Assign_ComboBox.Height+20
                        ZIndex: =22

                    Reporter_Value_Label As label:
                        Font: =Font.Georgia
                        Height: =30
                        PaddingBottom: =10
                        Size: =Reporter_Label.Size
                        Text: =LookUp(Users_1, ID = ticketInfo.CreatorId, fullName)
                        Width: =Reporter_Label.Width
                        X: =Rectangle_behind_details_1.X+Reporter_Label.Width
                        Y: =Reporter_Label.Y
                        ZIndex: =23

                    Reporter_Label As label:
                        Font: =Font.Georgia
                        FontWeight: =FontWeight.Semibold
                        Height: =30
                        LineHeight: =1
                        PaddingLeft: =20
                        Size: =compPageTextSizeFormatter_1.FinalTextSize
                        Text: ="Reporter"
                        Width: =Rectangle_behind_details_1.Width/2
                        X: =Rectangle_behind_details_1.X
                        Y: =Rectangle_behind_details_1.Y+Details_label_1.Height+20
                        ZIndex: =24

                    Additional_Assign_Value_Label As label:
                        Height: =30
                        Text: =Concat(Additional_Assign_ComboBox.SelectedItems, Concatenate(fullName, ","))
                        Visible: =false
                        X: =60
                        Y: =60
                        ZIndex: =25

    Rectangle1_6 As rectangle:
        Fill: =RGBA(56, 96, 178, 0.5)
        Height: =Parent.Height
        OnSelect: =varShowResPopup
        Visible: =varShowResPopup
        Width: =Parent.Width
        ZIndex: =3

    Container5 As groupContainer:
        Height: =484
        Visible: =varShowResPopup
        Width: =729
        X: =(Parent.Width/2 - Self.Width/2)
        Y: =(Parent.Height/2 - Self.Height/2)
        ZIndex: =4

        Rectangle2_3 As rectangle:
            Fill: =RGBA(241, 244, 249, 1)
            Height: =368
            Visible: =varShowResPopup
            Width: =648
            X: =Parent.Width/2 - Self.Width/2
            Y: =Parent.Height/2 - Self.Height/2
            ZIndex: =1

        Label1_4 As label:
            Align: =Align.Center
            Fill: =RGBA(255, 191, 0, 1)
            Text: ="Close Current Ticket"
            Visible: =varShowResPopup
            Width: =649
            X: =Parent.Width/2 - Self.Width/2
            Y: =(Parent.Height/2 - Self.Height/2) - 200
            ZIndex: =2

        Label2_3 As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Height: =96
            Text: |-
                ="Are you sure you want to close this ticket?
                If yes, please fill out the resolution to this ticket.
                "
            Visible: =varShowResPopup
            Width: =648
            X: =Parent.Width/2 - Self.Width/2
            Y: =(Parent.Height/2 - Self.Height/2) - 130
            ZIndex: =3

        TextInput1_3 As text:
            Default: =""
            Height: =155
            HintText: ="Please fill out a description for the resolution."
            Mode: =TextMode.MultiLine
            Visible: =varShowResPopup
            Width: =442
            X: =(Parent.Width/2 - Self.Width/2)
            Y: =Parent.Height/2 - Self.Height/2
            ZIndex: =4

        Button4_7 As button:
            OnSelect: =Set(varShowResPopup, false)
            Text: |-
                ="Cancel
                "
            Visible: =varShowResPopup
            X: =(Parent.Width/2 - Self.Width/2) - 100
            Y: =(Parent.Height/2 - Self.Height/2) + 120
            ZIndex: =5

        Button4_6 As button:
            OnSelect: |-
                =Patch(
                    Tickets,
                    LookUp(
                        Tickets,
                        ID = ticketInfo.ID
                    ),
                    {
                        resolution: TextInput1_3.Text,
                        lastUpdated: Now(),
                        dateClosed: Now(),
                        status: "closed",
                        updatedBy: userData.id
                    }
                );
                Set(
                    varShowResPopup,
                    false
                );
                Reset(TextInput1_3);
                Refresh(Tickets);
            Text: |-
                ="Close Ticket
                "
            Visible: =varShowResPopup
            X: =(Parent.Width/2 - Self.Width/2) + 100
            Y: =(Parent.Height/2 - Self.Height/2) + 120
            ZIndex: =6

    compWebHeader_4 As compWebHeader:
        CompScreenSize: ='Single Ticket Info'.Size
        ZIndex: =5

    Ticket_Title_1 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Fill: =ColorScheme.primary
        Height: =50
        Size: =If('Single Ticket Info'.Size=1, titleText.mobileSize, titleText.desktopSize)
        Text: ="Ticket Details"
        Width: =Parent.Width
        Y: =compWebHeader_4.Height
        ZIndex: =6

    Icon1 As icon.BackArrow:
        Color: =ColorScheme.secondary
        Height: =49
        Icon: =Icon.BackArrow
        OnSelect: =Back(ScreenTransition.Fade)
        Width: =49
        X: =15
        Y: =Ticket_Title_1.Y
        ZIndex: =7

    compWebMenu_10 As compWebMenu:
        Height: =If(showMenu, App.Height, compWebHeader_4.Height)
        Visible: ='Single Ticket Info'.Size > 1
        ZIndex: =8

    compPageTextSizeFormatter_1 As compPageTextSizeFormatter:
        PageSizeVariable: ='Single Ticket Info'.Size
        ZIndex: =9

