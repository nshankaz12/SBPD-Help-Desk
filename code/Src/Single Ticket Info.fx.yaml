"'Single Ticket Info' As screen":
    OnHidden: |-
        =Set(editMessage, false);
        Set(addMessage, true);
    OnVisible: =Refresh(Comments)

    Image13_6 As image:
        Height: =739
        Image: ='image (2)'
        ImagePosition: =ImagePosition.Stretch
        Width: =Parent.Width
        ZIndex: =1

    SingleTicketInfoMainContainer As groupContainer.horizontalAutoLayoutContainer:
        Height: =App.Height
        LayoutAlignItems: =LayoutAlignItems.Center
        LayoutJustifyContent: =LayoutJustifyContent.Center
        LayoutMode: =LayoutMode.Auto
        Width: =App.Width
        ZIndex: =2

        SingleTicketInfoVerticalLayoutContainer As groupContainer.verticalAutoLayoutContainer:
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            ZIndex: =1

            SingleTicketInfoHeader1 As groupContainer.horizontalAutoLayoutContainer:
                FillPortions: =0
                Height: =50
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                PaddingLeft: =50
                ZIndex: =1

                Container11 As groupContainer.manualLayoutContainer:
                    FillPortions: =0
                    Height: =Parent.Height
                    LayoutMinHeight: =50
                    LayoutMinWidth: =250
                    Width: =50
                    ZIndex: =1

                    "'profile pic + drop down_4' As icon.Person":
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 0, 0, 1)
                        Height: =40
                        Icon: =Icon.Person
                        Width: =40
                        X: =8
                        Y: =8
                        ZIndex: =1

                    "'new notification in dropdown_4' As circle":
                        BorderColor: =RGBA(168, 0, 0, 1)
                        Fill: =RGBA(168, 0, 0, 1)
                        Height: =15
                        Width: =15
                        X: =8
                        Y: =8
                        ZIndex: =2

                "'nav-Ticket_2' As button":
                    AutoDisableOnSelect: =false
                    Color: =RGBA(0, 0, 0, 1)
                    Fill: =RGBA(0, 0, 0, 0)
                    FillPortions: =1
                    OnSelect: =Navigate('Create A Ticket', ScreenTransition.Fade);
                    PressedColor: =RGBA(0, 0, 0, 1)
                    PressedFill: =
                    Text: ="Create Ticket"
                    Width: =174
                    X: =41
                    Y: =18
                    ZIndex: =3

                "'nav-name2_2' As button":
                    AutoDisableOnSelect: =false
                    Color: =RGBA(0, 0, 0, 1)
                    Fill: =RGBA(0, 0, 0, 0)
                    FillPortions: =1
                    OnSelect: =Navigate(MyTickets, ScreenTransition.Fade);
                    PressedColor: =RGBA(0, 0, 0, 1)
                    PressedFill: =
                    Text: ="My Tickets"
                    Width: =174
                    X: =215
                    Y: =18
                    ZIndex: =4

                "'nav-name3_2' As button":
                    AutoDisableOnSelect: =false
                    Color: =RGBA(0, 0, 0, 1)
                    Fill: =RGBA(0, 0, 0, 0)
                    FillPortions: =1
                    OnSelect: =Navigate('Log of All Tickets - Admin Tech', ScreenTransition.Fade);
                    PressedColor: =RGBA(0, 0, 0, 1)
                    PressedFill: =
                    Text: ="Ticket Log"
                    Width: =174
                    X: =389
                    Y: =18
                    ZIndex: =5

                "'nav-name4_2' As button":
                    AutoDisableOnSelect: =false
                    Color: =RGBA(0, 0, 0, 1)
                    Fill: =RGBA(0, 0, 0, 0)
                    FillPortions: =1
                    OnSelect: =Navigate('Metrics - Admin Tech', ScreenTransition.Fade);
                    PressedColor: =RGBA(0, 0, 0, 1)
                    PressedFill: =
                    Text: ="Ticket Metrics"
                    Width: =174
                    X: =563
                    Y: =18
                    ZIndex: =6

                "'nav-name5_2' As button":
                    AutoDisableOnSelect: =false
                    Color: =RGBA(0, 0, 0, 1)
                    Fill: =RGBA(0, 0, 0, 0)
                    FillPortions: =1
                    OnSelect: =Navigate('Assign Role - Admin', ScreenTransition.Fade);
                    PressedColor: =RGBA(0, 0, 0, 1)
                    PressedFill: =
                    Text: ="Assign Role"
                    Width: =174
                    X: =737
                    Y: =18
                    ZIndex: =7

            SingleTicketInfoHeader2 As groupContainer.horizontalAutoLayoutContainer:
                FillPortions: =0
                Height: =100
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                ZIndex: =2

                Ticket_Title_1 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FillPortions: =1
                    Height: =Parent.Height
                    Size: =30
                    Text: ="Ticket Details"
                    Width: =456
                    X: =465
                    Y: =58
                    ZIndex: =1

            SingleTicketInfoMainContent As groupContainer.horizontalAutoLayoutContainer:
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                PaddingTop: =50
                ZIndex: =3

                SingleTicketInfoDetailsContainer As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    Height: =Parent.Height
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    ZIndex: =1

                    Container17 As groupContainer.manualLayoutContainer:
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        ZIndex: =1

                        TextInput1 As text:
                            Default: =//Search(If(filterStatus.Selected.Result = "All", CurrentTicketInfo, Filter(CurrentTicketInfo, status = filterStatus.Selected.Result)), searchTicketQuery, "title", "description")
                            Height: =482
                            Mode: =TextMode.MultiLine
                            Width: =455
                            Y: =84
                            ZIndex: =1

                        title_label As label:
                            Height: =58
                            Text: =""
                            Width: =93
                            Y: =84
                            ZIndex: =2

                        Status_label As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Status:"
                            Width: =93
                            Y: =201
                            ZIndex: =3

                        Category_label As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Category:"
                            Width: =117
                            Y: =259
                            ZIndex: =4

                        Tags_label As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Tags:"
                            Width: =93
                            Y: =317
                            ZIndex: =5

                        Reporting_person_label As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Reporting Person:"
                            Width: =187
                            Y: =375
                            ZIndex: =6

                        Ticket_Created_value As label:
                            Height: =58
                            Size: =15
                            Text: =dateCreated
                            Width: =302
                            X: =152
                            Y: =142
                            ZIndex: =7

                        Status_value As label:
                            Height: =58
                            Size: =15
                            Text: =status
                            Width: =283
                            X: =152
                            Y: =201
                            ZIndex: =8

                        Category_value As label:
                            Height: =58
                            Size: =15
                            Text: =LookUp(Category, category = id, name)
                            Width: =283
                            X: =144
                            Y: =255
                            ZIndex: =9

                        Tags_value As label:
                            Height: =58
                            Size: =15
                            Text: =tags
                            Width: =362
                            X: =93
                            Y: =313
                            ZIndex: =10

                        Reporting_person_value As label:
                            Height: =58
                            Size: =15
                            Text: =reporting_person
                            Width: =268
                            X: =187
                            Y: =376
                            ZIndex: =11

                        Label1_8 As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Assigned to:"
                            Width: =132
                            Y: =434
                            ZIndex: =12

                        Assigned_to_value As label:
                            Height: =58
                            Size: =15
                            Text: =assigned_person
                            Width: =264
                            X: =152
                            Y: =433
                            ZIndex: =13

                        Title_value As label:
                            Height: =58
                            Size: =15
                            Text: =title
                            Width: =303
                            X: =152
                            Y: =86
                            ZIndex: =14

                        Ticket_Created_label As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Ticket created:"
                            Width: =152
                            Y: =143
                            ZIndex: =15

                        Title_label As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Title:"
                            Width: =187
                            Y: =86
                            ZIndex: =16

                        Label1_9 As label:
                            Height: =58
                            Size: =15
                            Text: |-
                                ="Description: "
                            Width: =132
                            Y: =492
                            ZIndex: =17

                        Assigned_to_value_1 As label:
                            Height: =90
                            Size: =15
                            Text: =description
                            Width: =310
                            X: =145
                            Y: =476
                            ZIndex: =18

                SingleticketInfoActivityHistoryContainer As groupContainer.horizontalAutoLayoutContainer:
                    FillPortions: =2
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    ZIndex: =2

                    Container18 As groupContainer.manualLayoutContainer:
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        Width: =Parent.Width
                        ZIndex: =1

                        Label2 As label:
                            Align: =Align.Center
                            Height: =44
                            Size: =20
                            Text: ="Activity History"
                            Width: =302
                            X: =336
                            ZIndex: =1

                        TextInput2 As text:
                            Default: =
                            Height: =72
                            HintText: ="Add a comment..."
                            OnSelect: =
                            Visible: =addMessage
                            Width: =Parent.Width - 100
                            X: =32
                            Y: =467
                            ZIndex: =2

                        TextInput9 As text:
                            Default: =If(editMessage, Gallery2.Selected.message, Blank())
                            Height: =72
                            OnSelect: =editMessage
                            Visible: =editMessage
                            Width: =Parent.Width - 100
                            X: =32
                            Y: =467
                            ZIndex: =3

                        Button1 As button:
                            OnSelect: |
                                =If(
                                    addMessage,
                                    Patch(
                                        Comments,
                                        Defaults(Comments),
                                        {
                                            ticketId: ticket,
                                            message: TextInput2.Text,
                                            creatorId: userData.id
                                        }
                                    );
                                    Reset(TextInput2);
                                    
                                );
                                If(
                                    editMessage,
                                    Patch(
                                        Comments,
                                        LookUp(
                                            Comments,
                                            id = editableRec.id
                                        ),
                                        {
                                            message: TextInput9.Text,
                                            lastUpdated: Now()
                                        }
                                    );
                                    Set(editMessage, false);
                                    Set(addMessage, true);
                                );
                            Text: |-
                                =If(
                                    addMessage,
                                    "Add Comment",
                                    If(
                                        editMessage,
                                        "Update Comment"
                                    )
                                )
                            Width: =200
                            X: =32
                            Y: =578
                            ZIndex: =4

                        Close_Ticket_Button As button:
                            OnSelect: |-
                                =If(
                                    addMessage,
                                    Set(
                                        varShowResPopup,
                                        true
                                    ),
                                    If(
                                        editMessage,
                                        Set(
                                            addMessage,
                                            true
                                        ) && Set(
                                            editMessage,
                                            false
                                        )
                                    )
                                )
                            Text: |-
                                =If(
                                    editMessage,
                                    "Cancel Update",
                                    If(
                                        addMessage,
                                        "Close Ticket"
                                    )
                                )
                            X: =407
                            Y: =578
                            ZIndex: =5

                        "Gallery2 As gallery.'BrowseLayout_Vertical_ThreeTextOneImageVariant_ver4.0'":
                            AccessibleLabel: =
                            BorderStyle: =BorderStyle.None
                            Default: =Last(Filter(Comments, ticketId = ticket))
                            Height: =365
                            Items: =Filter(Comments, ticketId = ticket)
                            Layout: =Layout.Vertical
                            TabIndex: =1
                            TemplateSize: =184
                            Width: =Parent.Width
                            Y: =80
                            ZIndex: =6

                            Title3 As label:
                                Height: =49
                                OnSelect: =Select(Parent)
                                PaddingBottom: =0
                                PaddingLeft: =0
                                PaddingRight: =0
                                PaddingTop: =0
                                Text: =LookUp(Users, ThisItem.creatorId = id, fullName)
                                VerticalAlign: =VerticalAlign.Top
                                Width: =268
                                X: =102
                                Y: =22
                                ZIndex: =1

                            Subtitle2 As label:
                                Height: =74
                                OnSelect: =Select(Parent)
                                PaddingBottom: =10
                                PaddingLeft: =1
                                PaddingRight: =0
                                PaddingTop: =0
                                Size: =15
                                Text: =ThisItem.message
                                VerticalAlign: =VerticalAlign.Top
                                Width: =799
                                X: =102
                                Y: =71
                                ZIndex: =2

                            Label1 As label:
                                Height: =34
                                OnSelect: =Select(Parent)
                                Text: =ThisItem.lastUpdated
                                Width: =263
                                X: =356
                                Y: =22
                                ZIndex: =3

                            Button11 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Gray
                                HoverFill: =
                                OnSelect: |-
                                    =Set(editMessage, true);
                                    Set(addMessage, false);
                                    Set(editableRec, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Edit"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =62
                                X: =93
                                Y: =145
                                ZIndex: =4

                            Button11_1 As button:
                                BorderStyle: =BorderStyle.None
                                Color: =DarkGray
                                DisabledBorderColor: =
                                DisabledColor: =
                                Fill: =Transparent
                                Height: =30
                                HoverBorderColor: =
                                HoverColor: =Gray
                                HoverFill: =
                                OnSelect: =Remove(Comments, ThisItem);
                                PressedBorderColor: =
                                PressedColor: =Gray
                                PressedFill: =
                                RadiusBottomLeft: =0
                                RadiusBottomRight: =0
                                RadiusTopLeft: =0
                                RadiusTopRight: =0
                                Text: ="Delete"
                                Visible: =If(ThisItem.creatorId = userData.id, true, false)
                                Width: =105
                                X: =159
                                Y: =145
                                ZIndex: =5

                            Image7 As image:
                                Height: =76
                                Image: |-
                                    =
                                    "https://ui-avatars.com/api/?name=" & Left(LookUp(Users, id = ThisItem.creatorId, firstName),1) & "+" & Left(LookUp(Users, id = ThisItem.creatorId, lastName),1) & "&background=ffffff&color=000000&size=128"
                                Width: =91
                                X: =4
                                Y: =8
                                ZIndex: =6

                            Circle3 As circle:
                                BorderThickness: =2
                                Fill: =Transparent
                                Height: =95
                                Width: =93
                                X: =2
                                ZIndex: =7

                Image7_2 As image:
                    Image: |-
                        ="https://ui-avatars.com/api/?name=" & Left(reporting_person,1) & "+" & Left(reporting_person,1) & "&background=ffffff&color=000000&size=128"
                    X: =82
                    Y: =30
                    ZIndex: =3

    Rectangle1_6 As rectangle:
        Fill: =RGBA(56, 96, 178, 0.5)
        Height: =Parent.Height
        OnSelect: =varShowResPopup
        Visible: =varShowResPopup
        Width: =Parent.Width
        ZIndex: =4

    Container5 As groupContainer:
        Height: =484
        Width: =729
        X: =(Parent.Width/2 - Self.Width/2)
        Y: =(Parent.Height/2 - Self.Height/2)
        ZIndex: =11

        Rectangle2_3 As rectangle:
            Fill: =RGBA(241, 244, 249, 1)
            Height: =368
            Visible: =varShowResPopup
            Width: =648
            X: =Parent.Width/2 - Self.Width/2
            Y: =Parent.Height/2 - Self.Height/2
            ZIndex: =1

        Label1_4 As label:
            Align: =Align.Center
            Fill: =RGBA(255, 191, 0, 1)
            Text: ="Close Current Ticket"
            Visible: =varShowResPopup
            Width: =649
            X: =Parent.Width/2 - Self.Width/2
            Y: =(Parent.Height/2 - Self.Height/2) - 200
            ZIndex: =2

        Label2_3 As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Height: =96
            Text: |-
                ="Are you sure you want to close this ticket?
                If yes, please fill out the resolution to this ticket.
                "
            Visible: =varShowResPopup
            Width: =648
            X: =Parent.Width/2 - Self.Width/2
            Y: =(Parent.Height/2 - Self.Height/2) - 130
            ZIndex: =3

        TextInput1_3 As text:
            Default: =""
            Height: =155
            HintText: ="Please fill out a description for the resolution."
            Mode: =TextMode.MultiLine
            Visible: =varShowResPopup
            Width: =442
            X: =(Parent.Width/2 - Self.Width/2)
            Y: =Parent.Height/2 - Self.Height/2
            ZIndex: =4

        Button4_7 As button:
            OnSelect: =Set(varShowResPopup, false)
            Text: |-
                ="Cancel
                "
            Visible: =varShowResPopup
            X: =(Parent.Width/2 - Self.Width/2) - 100
            Y: =(Parent.Height/2 - Self.Height/2) + 120
            ZIndex: =5

        Button4_6 As button:
            OnSelect: |-
                =Patch(Tickets_1, LookUp(Tickets_1, id = ticket), 
                {resolution:TextInput1_3.Text,
                lastUpdated:Now(),
                dateClosed:Now(),
                status: "closed",
                updatedBy:userData.id});
                Set(varShowResPopup, false)
            Text: |-
                ="Close Ticket
                "
            Visible: =varShowResPopup
            X: =(Parent.Width/2 - Self.Width/2) + 100
            Y: =(Parent.Height/2 - Self.Height/2) + 120
            ZIndex: =6

