App As appinfo:
    BackEnabled: =false
    OnStart: |+
        =If(
            LookUp(
                Users,
                email = User().Email,
                userRole
            ) = "admin",
            Set(
                is_admin,
                true
            ),
            Set(
                is_admin,
                false
            )
        );
        
        Set(
            userData,
            {
                firstName: LookUp(
                    Users,
                    email = User().Email,
                    firstName
                ),
                lastName: LookUp(
                    Users,
                    email = User().Email,
                    lastName
                ),
                email: User().Email,
                role: LookUp(
                    Users,
                    email = User().Email,
                    userRole
                ),
                id: LookUp(
                    Users,
                    email = User().Email,
                    id
                )
            }
        );
        //Enable for non timer based navigation for Splash Screen
        //Set(splashNavigate,true)
        
        ClearCollect(colStatus,{Result:"All"}, {Result:"open"}, {Result:"closed"});
        Collect(colStatus,Distinct(Tickets_1,status));
        ClearCollect(colStatus, ForAll(Distinct(colStatus, ThisRecord), Result));
        ClearCollect(
            navCol,
            {
                ID: 1,
                NavName: "Create Ticket",
                NavIcon: Icon.AddDocument,
                NavScreen: "Create A Ticket"
            },
            {
                ID: 2,
                NavName: "My Tickets",
                NavIcon: Icon.Folder,
                NavScreen: "MyTickets"
            },
            {
                ID: 3,
                NavName: "Ticket Log",
                NavIcon: Icon.DocumentWithContent,
                NavScreen: "Log of All Tickets - Admin Tech"
            },
            {
                ID: 4,
                NavName: "Ticket Metrics",
                NavIcon: Icon.Trending,
                NavScreen: "Metrics - Admin Tech"
            },
            {
                ID: 5,
                NavName: "Assign Role",
                NavIcon: Icon.People,
                NavScreen: "Assign Role - Admin"
            }
        );
        
        Set(NDrop,false);
        Set(MGallery,false);
        Set(HambIconChange,false);
        Set(CloseAlertRibbon,false);
        
        
        Set(gblNavItems, 
        Table(
            {
                MenuText: "Home",
                MenuIcon: Icon.Home,
                ScreenToGoTo: Home
            },
            {
                MenuText: "Create Ticket",
                MenuIcon: Icon.AddDocument,
                ScreenToGoTo: 'Create A Ticket'
            },
            {
                MenuText: "My Tickets",
                MenuIcon: Icon.Folder,
                ScreenToGoTo: MyTickets
            },
            {
                MenuText: "Ticket Log",
                MenuIcon: Icon.DocumentWithContent,
                ScreenToGoTo: 'Log of All Tickets - Admin Tech'
            },
            {
                MenuText: "Settings",
                MenuIcon: Icon.Settings,
                ScreenToGoTo: 'Assign Role - Admin'
            }
            )
        );
        
        Set(ColorScheme,{
            primary: RGBA(53,89,137, 1),
            secondary: RGBA(126,149,180,1),
            backgroundDark: RGBA(124,134,137, 1),
            offColor: RGBA(219,199,175, 1),
            orange: RGBA(246,149,43, 1)
        });
        
        Set(MainCategory, Filter(Category, parentId = Blank())); //only main categories. those that dont rely on a parent
        
        // Collection passed to filter component
        Set(varColumnStatus, colStatus);
        // Passed to filter component to check if filter is visible
        Set(varFilterVisible, false);
        
        
        
        
        
        
        
        
        
        
    StartScreen: =Home

